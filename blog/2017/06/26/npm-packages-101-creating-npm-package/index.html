<!DOCTYPE html>
<html lang="cs" dir="ltr" itemtype="http://schema.org/WebPage" itemscope="">
    <head>
    
    
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NPM packages 101: Creating npm package | fragaria.cz</title>
    <meta name="author" content="Fragaria s.r.o." />
    <meta name="robots" content="index,follow" />
    <meta name="description" content="Going down the path of node package creator - guide to create npm package and publish it to npm repository. Tim GouwAs I couldn’t find any Javascript package for handling Czech and Slovak National identification number, aka rodné číslo, I’ve decided to publish my own. As this was my first time going down the path of npm packa...">
    <meta name="keywords" content="fragaria, software, vývoj software, webové aplikace, python, javascript, angular, elasticsearch, html, css, npmpackagejavascriptpublish" />
    <!-- Favicons -->
    

    <meta property="og:url"           content="https://fragaria.cz/website/blog/2017/06/26/npm-packages-101-creating-npm-package/" />
    <meta property="og:type"          content="website" />
    <meta property="og:title"         content="NPM packages 101: Creating npm package | fragaria.cz" />
    <meta property="og:description"   content="Going down the path of node package creator - guide to create npm package and publish it to npm repository. Tim GouwAs I couldn’t find any Javascript package for handling Czech and Slovak National identification number, aka rodné číslo, I’ve decided to publish my own. As this was my first time going down the path of npm packa..." />

    

    
    <link rel="stylesheet" href="/website/assets/styles.css">
</head>



    <body class="page-container baseline-grid baseline-grid--visible">
        <div class="page-container__inner">
            <div class="sitenav-wrapper">
    <nav class="sitenav" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
        <img alt="Fragaria.cz" class="sitenav__brand" src="/website/assets/img/strawberry.svg">

        <ul class="sitenav__linkset">
            <li class="sitenav__linkset-item sitenav__linkset-item--fill"><a href="/website/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Fragaria.cz</span></a></li>
            
                <li class="sitenav__linkset-item "><a href="/website/works/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Works</span></a></li>
            
                <li class="sitenav__linkset-item "><a href="/website/team/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Team</span></a></li>
            
                <li class="sitenav__linkset-item sitenav__linkset-item--active"><a href="/website/blog/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Blog</span></a></li>
            
                <li class="sitenav__linkset-item "><a href="/website/career/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Career</span></a></li>
            
        </ul>
    </nav>
</div>


            <article itemtype="http://schema.org/BlogPosting" itemscope="">
  <div class="content-block">
    <h1 itemprop="headline">NPM packages 101: Creating npm package</h1>
    Going down the path of node package creator - guide to create npm package and publish it to npm repository. <br /><a name='more'></a><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-M7nNiOQc2rE/WU-YmE_VeZI/AAAAAAAAA5c/HvIktzxZY104b7GyCeoTPgPYSqweYgpZQCPcBGAYYCw/s1600/tim-gouw-68319.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="1070" data-original-width="1600" height="428" src="https://4.bp.blogspot.com/-M7nNiOQc2rE/WU-YmE_VeZI/AAAAAAAAA5c/HvIktzxZY104b7GyCeoTPgPYSqweYgpZQCPcBGAYYCw/s640/tim-gouw-68319.jpg" width="640" /></a><a href="http://unsplash.com/@punttim?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" rel="noopener noreferrer" style="background-color: black; border-radius: 3px; color: white; display: inline-block; font-family: , &quot;blinkmacsystemfont&quot; , &quot;san francisco&quot; , &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;ubuntu&quot; , &quot;roboto&quot; , &quot;noto&quot; , &quot;segoe ui&quot; , &quot;arial&quot; , sans-serif; font-size: 12px; font-weight: bold; line-height: 1.2; padding: 4px 6px; text-decoration: none;" target="_blank" title="Download free do whatever you want high-resolution photos from Tim Gouw"><span style="display: inline-block; padding: 2px 3px;"><svg style="height: 12px; position: relative; top: -1px; vertical-align: middle; width: auto;" viewbox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M20.8 18.1c0 2.7-2.2 4.8-4.8 4.8s-4.8-2.1-4.8-4.8c0-2.7 2.2-4.8 4.8-4.8 2.7.1 4.8 2.2 4.8 4.8zm11.2-7.4v14.9c0 2.3-1.9 4.3-4.3 4.3h-23.4c-2.4 0-4.3-1.9-4.3-4.3v-15c0-2.3 1.9-4.3 4.3-4.3h3.7l.8-2.3c.4-1.1 1.7-2 2.9-2h8.6c1.2 0 2.5.9 2.9 2l.8 2.4h3.7c2.4 0 4.3 1.9 4.3 4.3zm-8.6 7.5c0-4.1-3.3-7.5-7.5-7.5-4.1 0-7.5 3.4-7.5 7.5s3.3 7.5 7.5 7.5c4.2-.1 7.5-3.4 7.5-7.5z"></path></svg></span><span style="display: inline-block; padding: 2px 3px;">Tim Gouw</span></a></div>As I couldn’t find any Javascript package for handling <a href="https://en.wikipedia.org/wiki/National_identification_number#Czech_Republic_and_Slovakia">Czech and Slovak National identification number</a>, aka <em>rodné číslo</em>, I’ve decided to publish my own. As this was my first time going down the path of npm package maintainer, I’d like to share how it feels these days. <br /><br /><h2>NVM to the rescue</h2>Before diving into the package creation I’d like to recommend <a href="https://github.com/creationix/nvm">nvm</a>, a tool for managing separate node versions/environments on your local computer. I especially like it for storing my global npm packages like <a href="http://yeoman.io/">yeoman</a> or even npm itself under <code>~/.nvm/...</code> directories and not under <code>/usr/lib/node_modules</code> which I like to keep simple and su-rights-protected. <br /><pre><code><br /># install nvm<br />nvm install node<br />nvm use node<br /></code></pre>Ok, nvm is installed let's dive into package creation.<br /><br /><h2>Creating package from scratch? No. Yo!</h2>Shall I use ES5? ES6? ES7? Babel? Coffeescript? Typescript? How to configure them?<br />What version of compiler? Why the heck are we compiling Javascript anyway?<br />Shall I use <code>import</code> or <code>require</code>?<br />And what's this badge <img alt="generator-np build status" src="https://img.shields.io/travis/kub1x/rodnecislo.svg" style="position: relative; top: 10px;" />?<br />Automated building? Cool, how do I configure it?<br />And how about test framework? And mocks?!<br />Wait and what license should i choose?! <br /><br />You got it. Creating a npm package is a process of overwhelming amount of decisions. Decisions someone else must’ve already undertaken. And luckily some of them shared their effort in a form of <a href="http://yeoman.io/generators/">yeoman generator</a>. <br /><br /><h2>So let’s generate the package</h2>At the time of starting my package the <a href="https://github.com/d4rkr00t/generator-np">generator-np</a> seemed promising, though it is a bit out of date today: <img alt="generator-np issues" src="https://img.shields.io/github/issues/d4rkr00t/generator-np.svg" style="position: relative; top: 10px;" />. <br />It solved most of the questions above for me. As written in the description of the generator: <br /><blockquote>Generator for npm module with ES6+, <a href="https://github.com/babel/babel">Babel</a>, <a href="https://github.com/sindresorhus/ava">Ava</a>, <a href="https://github.com/eslint/eslint">ESlint</a>, <a href="https://travis-ci.org/">Travis</a>, and npm scripts</blockquote>So we'll write ES6 javascript, babel compilled, ava tested and use travis for CI. <br/>Now let's have an empty github repo <a href="https://github.com/kub1x/rodnecislo"><code>kub1x/rodnecislo</code></a> cloned in <code>rodnecislo</code> directory and start the generator as follows: <br /><pre><code class="bash">git clone git@github.com:kub1x/rodnecislo.git<br />cd rodnecislo<br />nvm use node<br />npm install -g yeoman generator-np<br />yo np<br /></code></pre>The generator-np still asks some questions, which need to be answered. Following are my answers and the reasoning behind them. <br /><br /><strong>What is the URL of your website?</strong><code>https://kub1x.github.io/rodnecislo/</code><br />Go to <a href="https://pages.github.com/">github pages</a>, scroll under the video tutorial, click “Project page” and follow the instructions. Your url will have this form: <code>https://<i>your_user_name</i>.github.io/<i>your_repo_name</i>/</code><br /><br /><strong>Do you need .travis.yml?</strong><em>Yes.</em><br />Got to <a href="https://travis-ci.org/">Travis-ci</a>. Create an account. Enable for your github repository. Get emails whenever you push to master something, that breaks your build, lint or tests. <br /><br /><strong>Do you need setup for coveralls?</strong><em>Yes.</em><br />You don’t need to do anything (except writing your tests...) to see beautiful visualisation of your test coverage on your <a href="https://coveralls.io/github/kub1x/rodnecislo">coveralls page</a>. <br /><br /><strong>Do you need setup for commitizen?</strong><em>Yes.</em><br />It feels really neat to have standardized format of commit messages. Better for cooperation, readability, confidence, automated tools... simply better. Using commitizen you basically do <code>git cz</code> and follow a short wizard instead of doing <code>git commit -m “some messy message”</code>. The resulting message looks like this: <code>build(travis): Add node version 7 to .travis.yml</code>. <br/>See <a href="http://commitizen.github.io/cz-cli/">commitizen page</a> on how the system actually works. It defaults to angular commit standard, that is <a href="https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#-git-commit-guidelines">described here</a>. Tough I find it much more helpful to get the notion from the actual commit messages in the <a href="https://github.com/angular/angular.js/commits/master">angular repo</a>. <br /><br /><strong>Do you need automatic github releases?</strong><em>Yes.</em><br />This gives us a great benefit of <a href="https://github.com/kub1x/rodnecislo/releases">generated releases</a>. The tool for it, <code>conventional-github-releaser</code>, tells you exactly what to do to, which itself helps so much, that I can’t resist repeating it here (just a little more specific). <br />Going from version <code>0.0.1</code> to <code>0.0.2</code>: <br /><ol><li>Make a change</li><li><code>npm run verify</code></li><li><code>git cz</code> the change</li><li>Make sure Travis CI turns green</li><li>Repeat until enough changes to call it a version ;P</li><li>Do <code>npm login</code> with your npmjs.org account. I failed to do this and accidentally published my package as a wrong user ;)</li><li><code>npm run major</code> OR <code>minor</code> OR <code>patch</code> - does all the following for you: <ul><li>Run tests, verifications, etc.</li><li>Bump version in package.json, commit, create git tag and push it</li><li><code>npm publish</code> to <a href="https://www.npmjs.com/package/rodnecislo">npmjs repo</a></li></ul></li><li><code>npm run github-release</code> - creates the nice release report on github mentioned earlier</li><li>Celebrate… and maintain.</li></ol><strong>Do you need CLI?</strong><em>No.</em><br />As I’m writing npm library rather than console tool, I don’t expect it being used from command line. But for the sake of completeness the <code>cli</code> option of the generator creates <a href="https://github.com/d4rkr00t/generator-np/blob/master/app/templates/src/cli.js">this file</a> in your package’s <code>src</code> directory and adds <code>meow</code> to your deps. That’s it. <br /><br /><h2>Aaaand we’re done... Almost</h2>After the generation process finishes the whole project is automatically being set up. The template itself takes care of <code>npm install</code>, running your first build, lint, tests, and checking for outdated dependencies using <a href="https://docs.npmjs.com/cli/outdated">npm outdated</a>. I&nbsp;recommend reading the output of the generation process as there is practically everything you need to know about your newly generated package, especially the npm scripts being called. <br />At the time of writing, some of the packages are outdated downright after the generation due to <a href="https://github.com/d4rkr00t/generator-np/pulls">inactivity of the maintainer</a> (perhaps someone could offer him a hand ;)). To fix this use <a href="https://www.npmjs.com/package/npm-check-updates">npm-check-updates</a> tool: <pre><code><br />npm install -g npm-check-updates<br />ncu -a<br /></code></pre>Now this is just the beginning. Even the first version of the module took quite some time on research, programming and writing.  I’m kinda wondering how maintaining of it will go, so about it later. <br /><br />Cheers, <code>npm install rodnecislo</code> and go opensource. 
  </div>
</article>

        </div>
    </body>
</html>
