<!DOCTYPE html>
<html lang="cs" dir="ltr" itemtype="http://schema.org/WebPage" itemscope="">
    <head>
    
    
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NPM packages 101: Creating npm package | fragaria.cz</title>
    <meta name="author" content="Fragaria s.r.o." />
    <meta name="robots" content="index,follow" />
    <meta name="description" content="Going down the path of node package creator - guide to create npmpackage and publish it to npmrepository.">
    <meta name="keywords" content="fragaria, software, vývoj software, webové aplikace, python, javascript, angular, elasticsearch, html, css, npmpackagejavascriptpublish" />
    <!-- Favicons -->
    

    <meta property="og:url"           content="https://fragaria.cz/website/blog/2017/06/26/npm-packages-101-creating-npm-package/" />
    <meta property="og:type"          content="website" />
    <meta property="og:title"         content="NPM packages 101: Creating npm package | fragaria.cz" />
    <meta property="og:description"   content="Going down the path of node package creator - guide to create npmpackage and publish it to npmrepository." />

    

    
    <link rel="stylesheet" href="/website/assets/styles.css">
</head>



    <body class="page-container baseline-grid ">
        <div class="page-container__inner">
            <div class="content-block js-sitenav">
    <nav class="sitenav" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
        <a href="/website/">
            <img alt="Fragaria s.r.o." class="sitenav__brand" src="/website/assets/img/strawberry.svg">
        </a>

        <ul class="sitenav__linkset">
            <li class="sitenav__linkset-item sitenav__linkset-item--main"><a href="/website/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Fragaria.cz</span></a></li>
            
                <li class="sitenav__linkset-item "><a href="/website/works/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Works</span></a></li>
            
                <li class="sitenav__linkset-item "><a href="/website/team/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Team</span></a></li>
            
                <li class="sitenav__linkset-item sitenav__linkset-item--active"><a href="/website/blog/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Blog</span></a></li>
            
                <li class="sitenav__linkset-item "><a href="/website/career/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Career</span></a></li>
            
        </ul>

        <div class="sitenav__menu-toggle typeset">
            <a href="#" class="sitenav__menu-toggle-link js-sitenav-menu-toggle">Menu</a>
        </div>
    </nav>
</div>


            <article itemtype="https://schema.org/TechArticle" itemscope class="article">
    <div class="content-block typeset">
        <h1 itemprop="name" class="article__headline">NPM packages 101: Creating npm package</h1>

        <p class="article__meta">
            <span itemprop="author" itemtype="http://schema.org/Person" itemscope="" class="article__author">
                <span itemprop="name">Jakub Podlaha</span>
            </span>
            <meta itemprop="datePublished" content="" />
            <span class="article__pubdate">26.06.2017</span>
            <meta itemprop="publisher"></meta>
        </p>

        

        <div class="article__content-wrap">
            <div class="article__content">
                <p>Going down the path of node package creator - guide to create npm
package and publish it to npm
repository.</p>

<p><a href="https://4.bp.blogspot.com/-M7nNiOQc2rE/WU-YmE_VeZI/AAAAAAAAA5c/HvIktzxZY104b7GyCeoTPgPYSqweYgpZQCPcBGAYYCw/s1600/tim-gouw-68319.jpg"><img src="https://4.bp.blogspot.com/-M7nNiOQc2rE/WU-YmE_VeZI/AAAAAAAAA5c/HvIktzxZY104b7GyCeoTPgPYSqweYgpZQCPcBGAYYCw/s640/tim-gouw-68319.jpg" alt="" /></a></p>

<p>Tim Gouw</p>

<p>As I couldn’t find any Javascript package for handling <a href="https://en.wikipedia.org/wiki/National_identification_number#Czech_Republic_and_Slovakia">Czech and Slovak
National identification
number</a>,
aka <em>rodné číslo</em>, I’ve decided to publish my own. As this was my first
time going down the path of npm package maintainer, I’d like to share
how it feels these days.</p>

<h2 id="nvm-to-the-rescue">NVM to the rescue</h2>

<p>Before diving into the package creation I’d like to recommend
<a href="https://github.com/creationix/nvm">nvm</a>, a tool for managing separate
node versions/environments on your local computer. I especially like it
for storing my global npm packages like <a href="http://yeoman.io/">yeoman</a> or
even npm itself under <code class="highlighter-rouge">~/.nvm/...</code> directories and not under
<code class="highlighter-rouge">/usr/lib/node_modules</code> which I like to keep simple and
su-rights-protected.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># install nvm
nvm install node
nvm use node
</code></pre></div></div>

<p>Ok, nvm is installed let’s dive into package creation.</p>

<h2 id="creating-package-from-scratch-no-yo">Creating package from scratch? No. Yo!</h2>

<p>Shall I use ES5? ES6? ES7? Babel? Coffeescript? Typescript? How to
configure them?
What version of compiler? Why the heck are we compiling Javascript
anyway?
Shall I use <code class="highlighter-rouge">import</code> or <code class="highlighter-rouge">require</code>?
And what’s this badge <img src="https://img.shields.io/travis/kub1x/rodnecislo.svg" alt="generator-np build
status" />?
Automated building? Cool, how do I configure it?
And how about test framework? And mocks?!
Wait and what license should i choose?!</p>

<p>You got it. Creating a npm package is a process of overwhelming amount
of decisions. Decisions someone else must’ve already undertaken. And
luckily some of them shared their effort in a form of <a href="http://yeoman.io/generators/">yeoman
generator</a>.</p>

<h2 id="so-lets-generate-the-package">So let’s generate the package</h2>

<p>At the time of starting my package the
<a href="https://github.com/d4rkr00t/generator-np">generator-np</a> seemed
promising, though it is a bit out of date today: <img src="https://img.shields.io/github/issues/d4rkr00t/generator-np.svg" alt="generator-np
issues" />.
It solved most of the questions above for me. As written in the
description of the generator:</p>

<blockquote>
  <p>Generator for npm module with ES6+,
<a href="https://github.com/babel/babel">Babel</a>,
<a href="https://github.com/sindresorhus/ava">Ava</a>,
<a href="https://github.com/eslint/eslint">ESlint</a>,
<a href="https://travis-ci.org/">Travis</a>, and npm scripts</p>
</blockquote>

<p>So we’ll write ES6 javascript, babel compilled, ava tested and use
travis for CI.
Now let’s have an empty github repo
<a href="https://github.com/kub1x/rodnecislo"><code class="highlighter-rouge">kub1x/rodnecislo</code></a> cloned in
<code class="highlighter-rouge">rodnecislo</code> directory and start the generator as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone git@github.com:kub1x/rodnecislo.git
cd rodnecislo
nvm use node
npm install -g yeoman generator-np
yo np
</code></pre></div></div>

<p>The generator-np still asks some questions, which need to be answered.
Following are my answers and the reasoning behind them.</p>

<p><strong>What is the URL of your
website?</strong><code class="highlighter-rouge">https://kub1x.github.io/rodnecislo/</code>
Go to <a href="https://pages.github.com/">github pages</a>, scroll under the video
tutorial, click “Project page” and follow the instructions. Your url
will have this form:
<code class="highlighter-rouge">https://your_user_name.github.io/your_repo_name/</code></p>

<p><strong>Do you need .travis.yml?</strong><em>Yes.</em>
Got to <a href="https://travis-ci.org/">Travis-ci</a>. Create an account. Enable
for your github repository. Get emails whenever you push to master
something, that breaks your build, lint or tests.</p>

<p><strong>Do you need setup for coveralls?</strong><em>Yes.</em>
You don’t need to do anything (except writing your tests…) to see
beautiful visualisation of your test coverage on your <a href="https://coveralls.io/github/kub1x/rodnecislo">coveralls
page</a>.</p>

<p><strong>Do you need setup for commitizen?</strong><em>Yes.</em>
It feels really neat to have standardized format of commit messages.
Better for cooperation, readability, confidence, automated tools…
simply better. Using commitizen you basically do <code class="highlighter-rouge">git cz</code> and follow a
short wizard instead of doing <code class="highlighter-rouge">git commit -m “some messy message”</code>. The
resulting message looks like this: <code class="highlighter-rouge">build(travis): Add node version 7 to
.travis.yml</code>.
See <a href="http://commitizen.github.io/cz-cli/">commitizen page</a> on how the
system actually works. It defaults to angular commit standard, that is
<a href="https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#-git-commit-guidelines">described
here</a>.
Tough I find it much more helpful to get the notion from the actual
commit messages in the <a href="https://github.com/angular/angular.js/commits/master">angular
repo</a>.</p>

<p><strong>Do you need automatic github releases?</strong><em>Yes.</em>
This gives us a great benefit of <a href="https://github.com/kub1x/rodnecislo/releases">generated
releases</a>. The tool for
it, <code class="highlighter-rouge">conventional-github-releaser</code>, tells you exactly what to do to,
which itself helps so much, that I can’t resist repeating it here (just
a little more specific).
Going from version <code class="highlighter-rouge">0.0.1</code> to <code class="highlighter-rouge">0.0.2</code>:</p>

<ol>
  <li>Make a change</li>
  <li><code class="highlighter-rouge">npm run verify</code></li>
  <li><code class="highlighter-rouge">git cz</code> the change</li>
  <li>Make sure Travis CI turns green</li>
  <li>Repeat until enough changes to call it a version ;P</li>
  <li>Do <code class="highlighter-rouge">npm login</code> with your npmjs.org account. I failed to do this and
accidentally published my package as a wrong user ;)</li>
  <li><code class="highlighter-rouge">npm run major</code> OR <code class="highlighter-rouge">minor</code> OR <code class="highlighter-rouge">patch</code> - does all the following for
you:
    <ul>
      <li>Run tests, verifications, etc.</li>
      <li>Bump version in package.json, commit, create git tag and push it</li>
      <li><code class="highlighter-rouge">npm publish</code> to <a href="https://www.npmjs.com/package/rodnecislo">npmjs
repo</a></li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">npm run github-release</code> - creates the nice release report on github
mentioned earlier</li>
  <li>Celebrate… and maintain.</li>
</ol>

<p><strong>Do you need CLI?</strong><em>No.</em>
As I’m writing npm library rather than console tool, I don’t expect it
being used from command line. But for the sake of completeness the <code class="highlighter-rouge">cli</code>
option of the generator creates <a href="https://github.com/d4rkr00t/generator-np/blob/master/app/templates/src/cli.js">this
file</a>
in your package’s <code class="highlighter-rouge">src</code> directory and adds <code class="highlighter-rouge">meow</code> to your deps. That’s
it.</p>

<h2 id="aaaand-were-done-almost">Aaaand we’re done… Almost</h2>

<p>After the generation process finishes the whole project is automatically
being set up. The template itself takes care of <code class="highlighter-rouge">npm install</code>, running
your first build, lint, tests, and checking for outdated dependencies
using <a href="https://docs.npmjs.com/cli/outdated">npm outdated</a>. I recommend
reading the output of the generation process as there is practically
everything you need to know about your newly generated package,
especially the npm scripts being called.
At the time of writing, some of the packages are outdated downright
after the generation due to <a href="https://github.com/d4rkr00t/generator-np/pulls">inactivity of the
maintainer</a> (perhaps
someone could offer him a hand ;)). To fix this use
<a href="https://www.npmjs.com/package/npm-check-updates">npm-check-updates</a>
tool:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install -g npm-check-updates
ncu -a
</code></pre></div></div>

<p>Now this is just the beginning. Even the first version of the module
took quite some time on research, programming and writing. I’m kinda
wondering how maintaining of it will go, so about it later.</p>

<p>Cheers, <code class="highlighter-rouge">npm install rodnecislo</code> and go opensource.</p>

                <hr>
            </div>
        </div>
    </div>
    <div class="content-block">
        <div class="article__misc">
            <div class="article__miscitem">
                <div class="sharebox">
    <ul class="sharebox__items">
        <li class="sharebox__item sharebox__item--twitter">
            <a class="sharebox__item-body" href="https://twitter.com/intent/tweet?text=NPM packages 101: Creating npm package&url=https://fragaria.cz/blog/2017/06/26/npm-packages-101-creating-npm-package/&via=&related=" rel="nofollow" target="_blank" title="Share on Twitter"><span>Share on Twitter</span></a>
        </li>
        <li class="sharebox__item sharebox__item--facebook">
            <a class="sharebox__item-body" href="https://facebook.com/sharer.php?u=https://fragaria.cz/blog/2017/06/26/npm-packages-101-creating-npm-package/" rel="nofollow" target="_blank" title="Share on Facebook"><span>Share on Facebook</span></a>
        </li>
        <li class="sharebox__item sharebox__item--gplus">
            <a class="sharebox__item-body" href="https://plus.google.com/share?url=https://fragaria.cz/blog/2017/06/26/npm-packages-101-creating-npm-package/" rel="nofollow" target="_blank" title="Share on Google+"><span>Share on Google+</span></a>
        </li>
    </ul>
</div>

            </div>
            <div class="article__miscitem">
                <div class="taglist" itemscope itemtype="http://schema.org/WebPage">
    
        
        <a class="taglist__tag" href="/website/blog/archive/tag/npm/" itemprop="relatedLink">npm</a>
    
        
        <a class="taglist__tag" href="/website/blog/archive/tag/package/" itemprop="relatedLink">package</a>
    
        
        <a class="taglist__tag" href="/website/blog/archive/tag/javascript/" itemprop="relatedLink">javascript</a>
    
        
        <a class="taglist__tag" href="/website/blog/archive/tag/publish/" itemprop="relatedLink">publish</a>
    
</div>

            </div>
        </div>
    </div>
</article>

        </div>

        <script src="/website/assets/js/site.js"></script>
    </body>
</html>
