<!DOCTYPE html> <html lang="cs" dir="ltr" itemtype="http://schema.org/WebPage" itemscope=""> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> <meta name="HandheldFriendly" content="true"/> <title>Píšeme desktopové aplikace v HTML | Fragaria.cz</title> <meta name="author" content="Fragaria s.r.o."/> <meta name="robots" content="index,follow"/> <meta name="description" content=""> <meta name="keywords" content="software, software development, web apps, vývoj software, webové aplikace, python, javascript, typescript, java, angular, vue, elasticsearch, html, css, chrome desktop apps, bootstrap, angularjs, desktop, chrome"/> <meta property="og:url" content="https://fragaria.github.com/website/blog/2014/02/07/piseme-desktopove-aplikace-v-html/"/> <meta property="og:type" content="website"/> <meta property="og:title" content="Píšeme desktopové aplikace v HTML | Fragaria.cz"/> <meta property="og:description" content=""/> <meta property="og:image" content="https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__1.png"/> <link rel="apple-touch-icon" sizes="180x180" href="/website/assets/favicons/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/website/assets/favicons/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/website/assets/favicons/favicon-16x16.png"> <link rel="manifest" href="/website/assets/favicons/site.webmanifest"> <link rel="mask-icon" href="/website/assets/favicons/safari-pinned-tab.svg" color="#ea272e"> <link rel="shortcut icon" href="/website/favicon.ico"> <meta name="msapplication-TileColor" content="#ea272e"> <meta name="msapplication-config" content="/website/assets/favicons/browserconfig.xml"> <meta name="theme-color" content="#ea272e"> <link rel="preload" href="https://res.cloudinary.com/fragaria/raw/upload/v1534234755/fragaria.cz/fonts/AndulkaTextPro.woff" as="font" type="font/woff" crossorigin> <link rel="preload" href="https://res.cloudinary.com/fragaria/raw/upload/v1534234755/fragaria.cz/fonts/AndulkaTextPro-Italic.woff" as="font" type="font/woff" crossorigin> <link rel="preload" href="https://res.cloudinary.com/fragaria/raw/upload/v1534234755/fragaria.cz/fonts/TriviaGroteskN2-Bold.woff" as="font" type="font/woff" crossorigin> <link rel="preload" href="/website/assets/fonts/fragariacz-icons.ttf?e65adk" as="font" type="font/ttf" crossorigin="anonymous"> <link rel="preload" href="/website/assets/js/site.js?c20344d8a90226834ba98b698196a484" as="script"> <link rel="stylesheet" href="/website/assets/styles.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="alternate" type="application/atom+xml" href="/website/feed.xml" title="Atom feed for this page"/> <link rel="self" type="application/atom+xml" href="/website/feed.xml"/> <link rel="preload" href="https://fonts.googleapis.com/css?family=Source+Code+Pro" as="style"> </head> <!--[if lte IE 10]><body class="page-container baseline-grid js-baseline-grid old-ie"><![endif]--> <!--[if gt IE 10]>--> <body class="page-container baseline-grid js-baseline-grid"> <!--<![endif]--> <div class="old-ie-warning"> <img alt="Fragaria s.r.o." src="/website/assets/img/strawberry.svg"> <h1>Fragaria.cz</h1> <p>We are an <b>agile-thinking</b> company. Following the philosophy, we've decided not to support <b>Internet Explorer prior to version 11</b>. It's just not worth the effort.</p> <p>To see our website in it's full glance, we suggest using <a href="https://www.microsoft.com/en-us/windows/microsoft-edge">Microsoft Edge</a>, <a href="https://www.google.com/chrome/">Google Chrome</a>, <a href="https://www.opera.com/download">Opera</a> or <a href="https://www.mozilla.org/en-US/firefox/new/">Mozilla Firefox</a>.</p> <p><strong>Thanks for your understanding</strong>.</p> </div> <nav class="sitenav js-sitenav" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement"> <div class="sitenav__container"> <div class="content-block content-block__cover--mobile"> <div class="sitenav__menu js-sitenav-menu"> <a href="/website/" class="sitenav__company typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Fragaria</span></a> <a class="sitenav__brand" href="/website/"> <img alt="Fragaria s.r.o." src="/website/assets/img/strawberry.svg"> </a> <button class="hamburger hamburger--collapse js-sitenav-menu__toggle" type="button" aria-label="Menu" aria-controls="navigation" aria-expanded="false"> <span class="hamburger-box"> <span class="hamburger-inner"></span> </span> </button> </div> <ul class="sitenav__linkset"> <li class="sitenav__linkset-item js-sitenav__link"><a href="/website/#projects" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">Projects</span></a></li> <li class="sitenav__linkset-item js-sitenav__link"><a href="/website/#team" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">Team</span></a></li> <li class="sitenav__linkset-item js-sitenav__link"><a href="/website/blog/" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">Blog</span></a></li> <li class="sitenav__linkset-item js-sitenav__link"><a href="/website/career/" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">Career</span></a></li> <li class="sitenav__linkset-item js-sitenav__link"><a href="/website/#get-in-touch" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">Contact</span></a></li> </ul> </div> </div> </nav> <div class="page-container__inner sitenav-wrapper"> <div class="sitenav-wrapper__push"> <article itemtype="https://schema.org/TechArticle" itemscope class="article" lang="cs"> <div class="content-block typeset"> <h1 itemprop="name" class="article__headline">Píšeme desktopové aplikace v HTML</h1> <meta itemprop="headline" content="Píšeme desktopové aplikace v HTML"> <div itemprop="publisher" itemtype="http://schema.org/Organization" class="hidden" itemscope> <div itemprop="logo" itemtype="http://schema.org/ImageObject" itemscope=""> <meta itemprop="url" content="https://fragaria.github.com/website/assets/img/strawberry.svg"> </div> <meta itemprop="name" content="Fragaria s.r.o."> </div> <p class="article__meta"> <span itemprop="author" itemtype="http://schema.org/Person" itemscope="" class="article__author"> by <span itemprop="name">Lukáš Marek</span> </span> <meta itemprop="datePublished" content=""/> <span class="article__pubdate">07.02.2014</span> <meta itemprop="publisher"></meta> </p> <div class="article__content-wrap"> <div class="article__content js-auto-add-headline-anchors"> <figure class="figure content-block__cover--mobile "> <img src="https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__1.png" srcset="https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__1.png 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__1.png 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__1.png 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__1.png 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__1.png 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__1.png 2240w," class="figure__image js-fix-baseline"/> </figure> <p>Nedávno jsem do mailu (díky Honzo!), dostal článek o tom, že Chrome Desktop Apps už <a href="http://blog.chromium.org/2014/01/run-chrome-apps-on-mobile-using-apache.html">fungují i na mobilu</a>. Na článku mě upřímně nejvíc zaujalo to, že vůbec nějaké Chrome Desktop Apps existují. No a samozřejmě jsem to potřeboval vyzkoušet. Na žádném “pracovním” projektu se to dvakrát nehodilo, tak jsem si řekl, že moje <a href="http://tea-clock.com/">vařítko čaje</a> si taky zaslouží trochu lásky. Netrvalo to ani den a podařilo se mi překlopit webovou stránku do jednoduché aplikace!</p> <h3 id="co-jsou-chrome-web-apps">Co jsou Chrome Web Apps?</h3> <p>Malá odbočka pro ty z vás, co (stejně jako já) až do dneška netušili, že něco takového existuje. Chrome Web Apps jsou webové aplikace, které se ale tváří jako “normální” Windows/Mac/Linux aplikace. To znamená, že ve Windows je najdete přímo ve Start menu (v záložce Chrome Apps), můžete si dát zástupce na plochu atd. Navíc u nových verzí Chrome je dole na liště tzv. Chrome App Launcher, což je jednoduchý způsob, jak spustit konkrétní aplikaci.</p> <h3 id="jak-to-šlo">Jak to šlo?</h3> <p><a href="https://github.com/krtek/Tea-clock">Zdrojový kód</a> původní aplikace je relativně jednoduchý – v zásadě jde o jednu HTML stránku a kus Javascript (popravdě Coffeescript) kódu v AngularJS. HTML šlo pryč víceméně celé. Ne, že by nešlo použít, ale potřeboval jsem uživatelské rozhraní aplikace razantně zmenšit – aplikace má rozměr jen 380x380 pixelů.</p> <figure class="figure content-block__cover--mobile "> <img src="https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__2.png" srcset="https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__2.png 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__2.png 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__2.png 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__2.png 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__2.png 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__2.png 2240w," class="figure__image js-fix-baseline"/> </figure> <p>V obou případech jsem použil <a href="http://getbootstrap.com/">Twitter Bootstrap</a>, nemusel jsem tedy nic vymýšlet a jen přepsal těch pár <code class="highlighter-rouge">div</code>ů a výběr čajů dal do <code class="highlighter-rouge">select</code> boxu místo <code class="highlighter-rouge">radio</code> buttonů, co jsou na webu. Původně jsem si maloval, že v Javascriptu nebudu muset dělat změny žádné, ale opak byl pravdou. Spoustu kódu jsem naštěstí mohl vyhodit – webová verze musí kontrolovat, zda je použitý správný prohlížeč a zda jsou k dispozici webové notifikace. To šlo všechno pryč.</p> <p>Změnit se musely dvě věci: Ukládání nastavení, protože desktopová aplikace nemůže použít <code class="highlighter-rouge">localStorage</code>, ale musí používat <code class="highlighter-rouge">chrome.storage.*</code>. Zase ale se nastavení automaticky (`chrome.storage.sync`) sdílí mezi všemi počítači konkrétního uživatele. Druhá změněná věc bylo samotné vyvolání notifikace – opět je třeba použít <code class="highlighter-rouge">chrome</code> rozhraní. I když tohle asi nebylo 100% nutné.</p> <p>Poslední věc bylo uklizení kódu, odstranění jednoho zbytečného kontroleru a vyhození JQuery. Tohle ale asi udělám i ve webové verzi a budu se snažit kód trochu sjednotit.</p> <p>Výsledek? Kdybych od začátku počítal s desktopovou verzí, mohl jsem si ušetřit spoustu práce. Ať už správným použitím kombinace <code class="highlighter-rouge">col-xs-*</code> a <code class="highlighter-rouge">col-md-*</code> tříd v HTML nebo trochou abstrakce v Javascriptu, kdy bych si obalil volání notifikací a <code class="highlighter-rouge">localStorage</code> nějakým proxy objektem. Ale ani takhle nešlo o nic hrozného, zabralo mi to asi 4-5 hodin času.</p> <p>Jen výsledný zdroják je zatím v <a href="https://github.com/krtek/Tea-clock/tree/desktop">samostatné větvi</a>, sdílení kódu mezi webem a desktopem musím teprve vyřešit.</p> <h3 id="hurá-do-světa">Hurá do světa</h3> <p>Paradoxně nejvíc času a bádání mi zabralo vydání aplikace do Chrome Web Store. Nějak jsem nepochopil oficiální postup <a href="https://developer.chrome.com/apps/publish_app.html">zabalení a vydání aplikace</a>. Takže pro příští generace (a pro mě za půl roku) tu raději sepíšu svůj vlastní návod:</p> <ol> <li>Aplikace se “zabalí” pomocí “Pack extension” přímo v prohlížeči Chrome. Tento krok je nutný <em>pouze</em> pro distribuci aplikace mimo Chrome Web Store nebo pro vyzkoušení instalace aplikace.</li> <li>Celý adresář s aplikací se zabalí do <code class="highlighter-rouge">zip</code> souboru. Soubor <strong>manifest.json</strong> musí být v kořeni <code class="highlighter-rouge">zip</code>u.</li> <li>Tento zip soubor se nahraje na Chrome Web Store a vydá.</li> <li>Zabalená aplikace z prvního kroku se nikam nenahrává, do zipu nepatří, prostě je na nic!</li> </ol> <p>Vydanou aplikaci <a href="https://chrome.google.com/webstore/detail/tea-clock-for-desktop/jhflnmgjaehakhchnneijfcnpkigcakn?authuser=1&amp;hl=en">můžete samozřejmě nainstalovat</a>. z Chrome Web Store. A dejte mi vědět, jak chodí?</p> <h3 id="mobilní-verze">Mobilní verze</h3> <p>A běží i na mobilu? No jéje!</p> <figure class="figure content-block__cover--mobile "> <img src="https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__3.png" srcset="https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__3.png 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__3.png 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__3.png 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__3.png 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__3.png 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2014-02-07-piseme-desktopove-aplikace-v-html__3.png 2240w," class="figure__image js-fix-baseline"/> </figure> <p>Ale o tom až příště.</p> </div> </div> </div> <div class="content-block"> <div class="article__misc"> <div class="article__miscitem"> <div class="taglist " itemscope itemtype="http://schema.org/WebPage"> <a class="taglist__tag anchor anchor--emphasized" href="/website/blog/archive/tag/chrome-desktop-apps/" itemprop="relatedLink">chrome desktop apps, </a> <a class="taglist__tag anchor anchor--emphasized" href="/website/blog/archive/tag/bootstrap/" itemprop="relatedLink">bootstrap, </a> <a class="taglist__tag anchor anchor--emphasized" href="/website/blog/archive/tag/angularjs/" itemprop="relatedLink">angularjs, </a> <a class="taglist__tag anchor anchor--emphasized" href="/website/blog/archive/tag/desktop/" itemprop="relatedLink">desktop, </a> <a class="taglist__tag anchor anchor--emphasized" href="/website/blog/archive/tag/chrome/" itemprop="relatedLink">chrome</a> </div> </div> <div class="article__miscitem"> <div class="sharebox"> <ul class="sharebox__items"> <li class="sharebox__item sharebox__item--twitter"> <a class="sharebox__item-body" href="https://twitter.com/intent/tweet?text=Píšeme desktopové aplikace v HTML&url=https://fragaria.github.com/website/blog/2014/02/07/piseme-desktopove-aplikace-v-html/&via=&related=" target="_blank" rel="noopener" title="Share on Twitter"><span>Share on Twitter</span></a> </li> <li class="sharebox__item sharebox__item--facebook"> <a class="sharebox__item-body" href="https://facebook.com/sharer.php?u=https://fragaria.github.com/website/blog/2014/02/07/piseme-desktopove-aplikace-v-html/" target="_blank" rel="noopener" title="Share on Facebook"><span>Share on Facebook</span></a> </li> <li class="sharebox__item sharebox__item--gplus"> <a class="sharebox__item-body" href="https://plus.google.com/share?url=https://fragaria.github.com/website/blog/2014/02/07/piseme-desktopove-aplikace-v-html/" target="_blank" rel="noopener" title="Share on Google+"><span>Share on Google+</span></a> </li> </ul> </div> </div> </div> </div> </article> <footer class="content-block"> <div class="footer"> <div class="footer__meta"> <a href="/website/"> <img alt="Fragaria s.r.o." class="footer__brand" src="/website/assets/img/strawberry.svg"> </a> <div class="footer__copy"> <div class="footer__copy-line footer__copy-line--emphasized">FRAGARIA &copy; 2018</div> <div class="footer__copy-line">Talk is cheap, show me the code.</div> </div> </div> <div class="footer__social"> <a href="https://twitter.com/fragariacz" class="icon--twitter footer__social-icon"></a> <a href="https://linkedin.com/company/fragaria-ltd-" class="icon--linkedin footer__social-icon"></a> <a href="https://github.com/fragaria"class="icon--github footer__social-icon"></a> </div> </div> </footer> </div> </div> <script src="/website/assets/js/smoothscroll.js"></script> <script src="/website/assets/js/site.js?c20344d8a90226834ba98b698196a484"></script> <script type="text/javascript" src="/website/assets/js/register-sw.js"></script> </body> </html>