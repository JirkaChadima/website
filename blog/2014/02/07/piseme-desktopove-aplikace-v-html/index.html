<!DOCTYPE html>
<html lang="cs" dir="ltr" itemtype="http://schema.org/WebPage" itemscope="">
    <head>
    
    
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Píšeme desktopové aplikace v HTML | fragaria.cz</title>
    <meta name="author" content="Fragaria s.r.o." />
    <meta name="robots" content="index,follow" />
    <meta name="description" content="Nedávno jsem do mailu (díky Honzo!), dostal článek o tom, že Chrome Desktop Apps už fungují i na mobilu.Na článku mě upřímně nejvíc zaujalo to, že vůbec nějaké Chrome Desktop Apps existují. No a samozřejmě jsem to potřeboval vyzkoušet. Na žádném "pracovním" projektu se to dvakrát nehodilo, tak jsem si řekl, že moje vařítko ča...">
    <meta name="keywords" content="fragaria, software, vývoj software, webové aplikace, python, javascript, angular, elasticsearch, html, css, chrome desktop appsbootstrapangularjsdesktopchrome" />
    <!-- Favicons -->
    

    <meta property="og:url"           content="https://fragaria.cz/website/blog/2014/02/07/piseme-desktopove-aplikace-v-html/" />
    <meta property="og:type"          content="website" />
    <meta property="og:title"         content="Píšeme desktopové aplikace v HTML | fragaria.cz" />
    <meta property="og:description"   content="Nedávno jsem do mailu (díky Honzo!), dostal článek o tom, že Chrome Desktop Apps už fungují i na mobilu.Na článku mě upřímně nejvíc zaujalo to, že vůbec nějaké Chrome Desktop Apps existují. No a samozřejmě jsem to potřeboval vyzkoušet. Na žádném "pracovním" projektu se to dvakrát nehodilo, tak jsem si řekl, že moje vařítko ča..." />

    

    
    <link rel="stylesheet" href="/website/assets/styles.css">
</head>



    <body class="page-container baseline-grid baseline-grid--visible">
        <div class="page-container__inner">
            <div class="sitenav-wrapper content-block js-sitenav">
    <nav class="sitenav" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
        <a href="/website/">
            <img alt="Fragaria s.r.o." class="sitenav__brand" src="/website/assets/img/strawberry.svg">
        </a>

        <ul class="sitenav__linkset">
            <li class="sitenav__linkset-item sitenav__linkset-item--main"><a href="/website/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Fragaria.cz</span></a></li>
            
                <li class="sitenav__linkset-item "><a href="/website/works/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Works</span></a></li>
            
                <li class="sitenav__linkset-item "><a href="/website/team/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Team</span></a></li>
            
                <li class="sitenav__linkset-item sitenav__linkset-item--active"><a href="/website/blog/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Blog</span></a></li>
            
                <li class="sitenav__linkset-item "><a href="/website/career/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Career</span></a></li>
            
        </ul>

        <div class="sitenav__menu-toggle typeset">
            <a href="#" class="sitenav__menu-toggle-link js-sitenav-menu-toggle">Menu</a>
        </div>
    </nav>
</div>


            <article itemtype="http://schema.org/BlogPosting" itemscope="">
  <div class="content-block">
    <h1 itemprop="headline">Píšeme desktopové aplikace v HTML</h1>
    <div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-9xbyhIhPz_c/UvOZHgiv77I/AAAAAAAAATg/UtDizEnZI7M/s1600/Ilustracni_tea_clock.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-9xbyhIhPz_c/UvOZHgiv77I/AAAAAAAAATg/UtDizEnZI7M/s1600/Ilustracni_tea_clock.png" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div>Nedávno jsem do mailu (díky Honzo!), dostal článek o tom, že Chrome Desktop Apps už <a href="http://blog.chromium.org/2014/01/run-chrome-apps-on-mobile-using-apache.html">fungují i na mobilu</a>.<br />Na článku mě upřímně nejvíc zaujalo to, že vůbec nějaké Chrome Desktop Apps existují. No a samozřejmě jsem to potřeboval vyzkoušet. <br />Na žádném "pracovním" projektu se to dvakrát nehodilo, tak jsem si řekl, že moje <a href="http://tea-clock.com/">vařítko čaje</a> si taky zaslouží trochu lásky. Netrvalo to ani den a podařilo se mi překlopit webovou stránku do jednoduché aplikace!<br /><h3></h3><h3></h3><h3><br /></h3><h3>Co jsou Chrome Web Apps?</h3>Malá odbočka pro ty z vás, co (stejně jako já) až do dneška netušili, že něco takového existuje.<br />Chrome Web Apps jsou webové aplikace, které se ale tváří jako "normální" Windows/Mac/Linux aplikace. To znamená, že ve Windows je najdete přímo ve Start menu (v záložce Chrome Apps), můžete si dát zástupce na plochu atd.<br />Navíc u nových verzí Chrome je dole na liště tzv. Chrome App Launcher, což je jednoduchý způsob, jak spustit konkrétní aplikaci.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_CaL3IUbss-ZIuoVlndCzxRXGVe_-XU8ffHI2r4P-kBZdmMPHgONT_Xxk2Is_yW3GkcH_jtZQrsegqZu93pKftNT7lpW-LRY9-WXRYvpTMm6nTRdWOzSjmM4" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/_CaL3IUbss-ZIuoVlndCzxRXGVe_-XU8ffHI2r4P-kBZdmMPHgONT_Xxk2Is_yW3GkcH_jtZQrsegqZu93pKftNT7lpW-LRY9-WXRYvpTMm6nTRdWOzSjmM4" /></a></div><h3><br /></h3><h3>Jak to šlo?</h3><a href="https://github.com/krtek/Tea-clock">Zdrojový kód</a> původní aplikace je relativně jednoduchý – v zásadě jde o jednu HTML stránku a kus Javascript (popravdě Coffeescript) kódu v AngularJS.<br />HTML šlo pryč víceméně celé. Ne, že by nešlo použít, ale potřeboval jsem uživatelské rozhraní aplikace razantně zmenšit – aplikace má rozměr jen 380x380 pixelů. <br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-mfXxFK5pcQw/UvOXlsAD3JI/AAAAAAAAATE/4Vkwoc0gJ4s/s1600/Screen+Shot+2014-02-02+at+11.28.36.png" imageanchor="1"><img border="0" src="http://2.bp.blogspot.com/-mfXxFK5pcQw/UvOXlsAD3JI/AAAAAAAAATE/4Vkwoc0gJ4s/s1600/Screen+Shot+2014-02-02+at+11.28.36.png" /></a></div>V obou případech jsem použil <a href="http://getbootstrap.com/">Twitter Bootstrap</a>, nemusel jsem tedy nic vymýšlet a jen přepsal těch pár <code>div</code>ů a výběr čajů dal do <code>select</code> boxu místo <code>radio</code> buttonů, co jsou na webu.<br />Původně jsem si maloval, že v Javascriptu nebudu muset dělat změny žádné, ale opak byl pravdou. Spoustu kódu jsem naštěstí mohl vyhodit – webová verze musí kontrolovat, zda je použitý správný prohlížeč a zda jsou k dispozici webové notifikace. To šlo všechno pryč.<br /><br />Změnit se musely dvě věci: Ukládání nastavení, protože desktopová aplikace nemůže použít <code>localStorage</code>, ale musí používat <code>chrome.storage.*</code>. Zase ale se nastavení automaticky (`chrome.storage.sync`) sdílí mezi všemi počítači konkrétního uživatele.<br />Druhá změněná věc bylo samotné vyvolání notifikace – opět je třeba použít <code>chrome</code> rozhraní. I když tohle asi nebylo 100% nutné.<br /><br />Poslední věc bylo uklizení kódu, odstranění jednoho zbytečného kontroleru a vyhození JQuery. Tohle ale asi udělám i ve webové verzi a budu se snažit kód trochu sjednotit.<br /><br />Výsledek? Kdybych od začátku počítal s desktopovou verzí, mohl jsem si ušetřit spoustu práce. Ať už správným použitím kombinace <code>col-xs-*</code> a  <code>col-md-*</code> tříd v HTML nebo trochou abstrakce v Javascriptu, kdy bych si obalil volání notifikací a <code>localStorage</code>  nějakým proxy objektem.<br />Ale ani takhle nešlo o nic hrozného, zabralo mi to asi 4-5 hodin času.<br /><br />Jen výsledný zdroják je zatím v <a href="https://github.com/krtek/Tea-clock/tree/desktop">samostatné větvi</a>, sdílení kódu mezi webem a desktopem musím teprve vyřešit.<br /><h3></h3><h3><br /></h3><h3>Hurá do světa</h3>Paradoxně nejvíc času a bádání mi zabralo vydání aplikace do Chrome Web Store. Nějak jsem nepochopil oficiální postup <a href="https://developer.chrome.com/apps/publish_app.html">zabalení a vydání aplikace</a>.<br />Takže pro příští generace (a pro mě za půl roku) tu raději sepíšu svůj vlastní návod:<br /><ol><li>Aplikace se "zabalí" pomocí "Pack extension" přímo v prohlížeči Chrome. Tento krok je nutný <em>pouze</em> pro distribuci aplikace mimo Chrome Web Store nebo pro vyzkoušení instalace aplikace.</li><li>Celý adresář s aplikací se zabalí do <code>zip</code> souboru. Soubor <strong>manifest.json</strong> musí být v kořeni <code>zip</code>u.</li><li>Tento zip soubor se nahraje na Chrome Web Store a vydá.</li><li>Zabalená aplikace z prvního kroku se nikam nenahrává, do zipu nepatří, prostě je na nic!</li></ol>Vydanou aplikaci <a href="https://chrome.google.com/webstore/detail/tea-clock-for-desktop/jhflnmgjaehakhchnneijfcnpkigcakn?authuser=1&amp;hl=en">můžete samozřejmě nainstalovat</a>. z Chrome Web Store. A dejte mi vědět, jak chodí?<br /><h3></h3><h3><br /></h3><h3>Mobilní verze</h3>A běží i na mobilu? No jéje!<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-QlcvLHxvtVk/UvOXmPDVUmI/AAAAAAAAATI/T2S8HEuTRjw/s1600/android.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-QlcvLHxvtVk/UvOXmPDVUmI/AAAAAAAAATI/T2S8HEuTRjw/s1600/android.png" /></a></div>Ale o tom až příště.
  </div>
</article>

        </div>

        <script src="/website/assets/js/site.js"></script>
    </body>
</html>
