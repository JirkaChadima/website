<!DOCTYPE html>
<html lang="cs" dir="ltr" itemtype="http://schema.org/WebPage" itemscope="">
    <head>
    
    
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Píšeme desktopové aplikace v HTML | fragaria.cz</title>
    <meta name="author" content="Fragaria s.r.o." />
    <meta name="robots" content="index,follow" />
    <meta name="description" content="http://1.bp.blogspot.com/-9xbyhIhPz_c/UvOZHgiv77I/AAAAAAAAATg/UtDizEnZI7M/s1600/Ilustracni_tea_clock.png">
    <meta name="keywords" content="fragaria, software, vývoj software, webové aplikace, python, javascript, angular, elasticsearch, html, css, chrome desktop appsbootstrapangularjsdesktopchrome" />
    <!-- Favicons -->
    

    <meta property="og:url"           content="https://fragaria.cz/website/blog/2014/02/07/piseme-desktopove-aplikace-v-html/" />
    <meta property="og:type"          content="website" />
    <meta property="og:title"         content="Píšeme desktopové aplikace v HTML | fragaria.cz" />
    <meta property="og:description"   content="http://1.bp.blogspot.com/-9xbyhIhPz_c/UvOZHgiv77I/AAAAAAAAATg/UtDizEnZI7M/s1600/Ilustracni_tea_clock.png" />

    

    
    <link rel="stylesheet" href="/website/assets/styles.css">
</head>



    <body class="page-container baseline-grid ">
        <div class="page-container__inner">
            <div class="sitenav-wrapper content-block js-sitenav">
    <nav class="sitenav" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
        <a href="/website/">
            <img alt="Fragaria s.r.o." class="sitenav__brand" src="/website/assets/img/strawberry.svg">
        </a>

        <ul class="sitenav__linkset">
            <li class="sitenav__linkset-item sitenav__linkset-item--main"><a href="/website/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Fragaria.cz</span></a></li>
            
                <li class="sitenav__linkset-item "><a href="/website/works/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Works</span></a></li>
            
                <li class="sitenav__linkset-item "><a href="/website/team/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Team</span></a></li>
            
                <li class="sitenav__linkset-item sitenav__linkset-item--active"><a href="/website/blog/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Blog</span></a></li>
            
                <li class="sitenav__linkset-item "><a href="/website/career/" class="sitenav__link typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Career</span></a></li>
            
        </ul>

        <div class="sitenav__menu-toggle typeset">
            <a href="#" class="sitenav__menu-toggle-link js-sitenav-menu-toggle">Menu</a>
        </div>
    </nav>
</div>


            <article itemtype="https://schema.org/TechArticle" itemscope class="article">
    <div class="content-block typeset">
        <h1 itemprop="name" class="article__headline alpha">Píšeme desktopové aplikace v HTML</h1>

        <p class="article__meta">
            <span itemprop="author" itemtype="http://schema.org/Person" itemscope="" class="article__author">
                <span itemprop="name">Lukáš Marek</span>
            </span>
            <meta itemprop="datePublished" content="" />
            <span class="article__pubdate">07.02.2014</span>
            <meta itemprop="publisher"></meta>
        </p>

        

        <div class="article__content-wrap">
            <div class="article__content">
                <p><a href="http://1.bp.blogspot.com/-9xbyhIhPz_c/UvOZHgiv77I/AAAAAAAAATg/UtDizEnZI7M/s1600/Ilustracni_tea_clock.png">http://1.bp.blogspot.com/-9xbyhIhPz_c/UvOZHgiv77I/AAAAAAAAATg/UtDizEnZI7M/s1600/Ilustracni_tea_clock.png</a></p>

<p>Nedávno jsem do mailu (díky Honzo!), dostal článek o tom, že Chrome
Desktop Apps už <a href="http://blog.chromium.org/2014/01/run-chrome-apps-on-mobile-using-apache.html">fungují i na
mobilu</a>.
Na článku mě upřímně nejvíc zaujalo to, že vůbec nějaké Chrome Desktop
Apps existují. No a samozřejmě jsem to potřeboval vyzkoušet.
Na žádném “pracovním” projektu se to dvakrát nehodilo, tak jsem si řekl,
že moje <a href="http://tea-clock.com/">vařítko čaje</a> si taky zaslouží trochu
lásky. Netrvalo to ani den a podařilo se mi překlopit webovou stránku
do jednoduché aplikace!</p>

<h3 id="co-jsou-chrome-web-apps">Co jsou Chrome Web Apps?</h3>

<p>Malá odbočka pro ty z vás, co (stejně jako já) až do dneška netušili, že
něco takového existuje.
Chrome Web Apps jsou webové aplikace, které se ale tváří jako “normální”
Windows/Mac/Linux aplikace. To znamená, že ve Windows je najdete přímo
ve Start menu (v záložce Chrome Apps), můžete si dát zástupce na plochu
atd.
Navíc u nových verzí Chrome je dole na liště tzv. Chrome App Launcher,
což je jednoduchý způsob, jak spustit konkrétní
aplikaci.</p>

<p><a href="http://2.bp.blogspot.com/_CaL3IUbss-ZIuoVlndCzxRXGVe_-XU8ffHI2r4P-kBZdmMPHgONT_Xxk2Is_yW3GkcH_jtZQrsegqZu93pKftNT7lpW-LRY9-WXRYvpTMm6nTRdWOzSjmM4">http://2.bp.blogspot.com/_CaL3IUbss-ZIuoVlndCzxRXGVe_-XU8ffHI2r4P-kBZdmMPHgONT_Xxk2Is_yW3GkcH_jtZQrsegqZu93pKftNT7lpW-LRY9-WXRYvpTMm6nTRdWOzSjmM4</a></p>

<h3 id="jak-to-šlo">Jak to šlo?</h3>

<p><a href="https://github.com/krtek/Tea-clock">Zdrojový kód</a> původní aplikace je
relativně jednoduchý – v zásadě jde o jednu HTML stránku a kus
Javascript (popravdě Coffeescript) kódu v AngularJS.
HTML šlo pryč víceméně celé. Ne, že by nešlo použít, ale potřeboval jsem
uživatelské rozhraní aplikace razantně zmenšit – aplikace má rozměr jen
380x380
pixelů.</p>

<p><a href="http://2.bp.blogspot.com/-mfXxFK5pcQw/UvOXlsAD3JI/AAAAAAAAATE/4Vkwoc0gJ4s/s1600/Screen+Shot+2014-02-02+at+11.28.36.png">http://2.bp.blogspot.com/-mfXxFK5pcQw/UvOXlsAD3JI/AAAAAAAAATE/4Vkwoc0gJ4s/s1600/Screen+Shot+2014-02-02+at+11.28.36.png</a></p>

<p>V obou případech jsem použil <a href="http://getbootstrap.com/">Twitter
Bootstrap</a>, nemusel jsem tedy nic vymýšlet a
jen přepsal těch pár <code class="highlighter-rouge">div</code>ů a výběr čajů dal do <code class="highlighter-rouge">select</code> boxu místo
<code class="highlighter-rouge">radio</code> buttonů, co jsou na webu.
Původně jsem si maloval, že v Javascriptu nebudu muset dělat změny
žádné, ale opak byl pravdou. Spoustu kódu jsem naštěstí mohl vyhodit
– webová verze musí kontrolovat, zda je použitý správný prohlížeč a
zda jsou k dispozici webové notifikace. To šlo všechno pryč.</p>

<p>Změnit se musely dvě věci: Ukládání nastavení, protože desktopová
aplikace nemůže použít <code class="highlighter-rouge">localStorage</code>, ale musí používat
<code class="highlighter-rouge">chrome.storage.*</code>. Zase ale se nastavení automaticky
(`chrome.storage.sync`) sdílí mezi všemi počítači konkrétního
uživatele.
Druhá změněná věc bylo samotné vyvolání notifikace – opět je třeba
použít <code class="highlighter-rouge">chrome</code> rozhraní. I když tohle asi nebylo 100% nutné.</p>

<p>Poslední věc bylo uklizení kódu, odstranění jednoho zbytečného
kontroleru a vyhození JQuery. Tohle ale asi udělám i ve webové verzi a
budu se snažit kód trochu sjednotit.</p>

<p>Výsledek? Kdybych od začátku počítal s desktopovou verzí, mohl jsem si
ušetřit spoustu práce. Ať už správným použitím kombinace <code class="highlighter-rouge">col-xs-*</code> a
<code class="highlighter-rouge">col-md-*</code> tříd v HTML nebo trochou abstrakce v Javascriptu, kdy bych si
obalil volání notifikací a <code class="highlighter-rouge">localStorage</code> nějakým proxy objektem.
Ale ani takhle nešlo o nic hrozného, zabralo mi to asi 4-5 hodin času.</p>

<p>Jen výsledný zdroják je zatím v <a href="https://github.com/krtek/Tea-clock/tree/desktop">samostatné
větvi</a>, sdílení kódu
mezi webem a desktopem musím teprve vyřešit.</p>

<h3 id="hurá-do-světa">Hurá do světa</h3>

<p>Paradoxně nejvíc času a bádání mi zabralo vydání aplikace do Chrome Web
Store. Nějak jsem nepochopil oficiální postup <a href="https://developer.chrome.com/apps/publish_app.html">zabalení a vydání
aplikace</a>.
Takže pro příští generace (a pro mě za půl roku) tu raději sepíšu svůj
vlastní návod:</p>

<ol>
  <li>Aplikace se “zabalí” pomocí “Pack extension” přímo v prohlížeči
Chrome. Tento krok je nutný <em>pouze</em> pro distribuci aplikace mimo
Chrome Web Store nebo pro vyzkoušení instalace aplikace.</li>
  <li>Celý adresář s aplikací se zabalí do <code class="highlighter-rouge">zip</code> souboru. Soubor
<strong>manifest.json</strong> musí být v kořeni <code class="highlighter-rouge">zip</code>u.</li>
  <li>Tento zip soubor se nahraje na Chrome Web Store a vydá.</li>
  <li>Zabalená aplikace z prvního kroku se nikam nenahrává, do zipu
nepatří, prostě je na nic!</li>
</ol>

<p>Vydanou aplikaci <a href="https://chrome.google.com/webstore/detail/tea-clock-for-desktop/jhflnmgjaehakhchnneijfcnpkigcakn?authuser=1&amp;hl=en">můžete samozřejmě
nainstalovat</a>.
z Chrome Web Store. A dejte mi vědět, jak chodí?</p>

<h3 id="mobilní-verze">Mobilní verze</h3>

<p>A běží i na mobilu? No
jéje!</p>

<p><a href="http://3.bp.blogspot.com/-QlcvLHxvtVk/UvOXmPDVUmI/AAAAAAAAATI/T2S8HEuTRjw/s1600/android.png">http://3.bp.blogspot.com/-QlcvLHxvtVk/UvOXmPDVUmI/AAAAAAAAATI/T2S8HEuTRjw/s1600/android.png</a></p>

<p>Ale o tom až příště.</p>

            </div>

        </div>
    </div>
    <div class="content-block">
        <div class="article__misc">
            <div class="article__sharebox">
                <ul class="sharebox">
    <li class="sharebox__item sharebox__item--twitter">
        <a class="sharebox__item-body" href="https://twitter.com/intent/tweet?text=Píšeme desktopové aplikace v HTML&url=https://fragaria.cz/blog/2014/02/07/piseme-desktopove-aplikace-v-html/&via=&related=" rel="nofollow" target="_blank" title="Share on Twitter"><span>Share on Twitter</span></a>
    </li>
    <li class="sharebox__item sharebox__item--facebook">
        <a class="sharebox__item-body" href="https://facebook.com/sharer.php?u=https://fragaria.cz/blog/2014/02/07/piseme-desktopove-aplikace-v-html/" rel="nofollow" target="_blank" title="Share on Facebook"><span>Share on Facebook</span></a>
    </li>
    <li class="sharebox__item sharebox__item--gplus">
        <a class="sharebox__item-body" href="https://plus.google.com/share?url=https://fragaria.cz/blog/2014/02/07/piseme-desktopove-aplikace-v-html/" rel="nofollow" target="_blank" title="Share on Google+"><span>Share on Google+</span></a>
    </li>
</div>

            </div>
            <div class="article__tags">
                
            </div>
        </div>
    </div>
</article>

        </div>

        <script src="/website/assets/js/site.js"></script>
    </body>
</html>
