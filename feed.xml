<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.7.3">Jekyll</generator><link href="https://fragaria.cz/website/feed.xml" rel="self" type="application/atom+xml" /><link href="https://fragaria.cz/website/" rel="alternate" type="text/html" /><updated>2018-07-27T11:07:59+00:00</updated><id>https://fragaria.cz/website/</id><title type="html">fragaria.cz</title><subtitle>We are a software development company based in Czech Republic. Our specialization are state-of-the-art apps without compromises that you can rely on. JavaScript, Python, NodeJS, Angular or Vue.js... we know it all.
</subtitle><entry><title type="html">Blockchain? Can do!</title><link href="https://fragaria.cz/website/blog/2018/03/28/blockchain-can-do/" rel="alternate" type="text/html" title="Blockchain? Can do!" /><published>2018-03-28T11:25:00+00:00</published><updated>2018-03-28T11:25:00+00:00</updated><id>https://fragaria.cz/website/blog/2018/03/28/blockchain-can-do</id><content type="html" xml:base="https://fragaria.cz/website/blog/2018/03/28/blockchain-can-do/">&lt;p&gt;Blockchain is the new sexy. Everybody is talking about it, people in
lines in grocery stores are discussing Bitcoin price, big companies are
pouring tons of money in research. Everybody just wants to be a part of
it. And from now on, so are we! It turns out, it’s just another young
technology that we can
handle.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2018-03-28-blockchain-can-do__1.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;h2 id=&quot;not-that-hard&quot;&gt;Not that hard&lt;/h2&gt;

&lt;p&gt;The thing is, that blockchain itself is basically just a distributed
ledger that holds an undeniable and unchangeable history of
transactions. That sounds pretty boring, but you can actually do many
things on top of it. Take for example
&lt;a href=&quot;https://www.ethereum.org/&quot;&gt;Ethereum&lt;/a&gt;. Its prominent feature is a thing
called &lt;a href=&quot;https://en.wikipedia.org/wiki/Smart_contract&quot;&gt;smart contracts&lt;/a&gt; -
an executable Turing-complete code that runs on top of the distributed
network. And that’s where the fun begins.&lt;/p&gt;

&lt;p&gt;By using a programming language called
&lt;a href=&quot;https://solidity.readthedocs.io/en/v0.4.21/&quot;&gt;Solidity&lt;/a&gt;, you can create
your own &lt;a href=&quot;https://eidoo.io/erc20-tokens-list/&quot;&gt;crypto-tokens&lt;/a&gt;, &lt;a href=&quot;https://cryptozombies.io/&quot;&gt;fully
distributed games&lt;/a&gt; and virtually anything you
can imagine. Everything running solely in a distributed network, you
don’t have to own any servers. Sounds good? Well, slow down, because
there is a lot, and I mean a &lt;strong&gt;LOT&lt;/strong&gt;, of issues.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://ethereum.stackexchange.com/questions/58/why-is-the-average-block-time-17-seconds&quot;&gt;It is awfully
slow.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ethereum.stackexchange.com/questions/28666/whats-the-transaction-throughput-on-ethereum-how-fast-the-nodes-can-replicate&quot;&gt;It has a very limited
throughput.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ethereum.stackexchange.com/questions/872/what-is-the-cost-to-store-1kb-10kb-100kb-worth-of-data-into-the-ethereum-block&quot;&gt;Storage of any data is very
expensive.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.coindesk.com/startup-lost-160-million-still-wants-shake-ethereum/&quot;&gt;A small mistake and your money is
gone.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ethereum.stackexchange.com/questions/6107/what-is-the-default-ordering-of-transactions-during-mining-in-e-g-geth&quot;&gt;You have no guarantee that your code will be executed unless you
actually pay
more.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.mycryptopedia.com/orphan-uncle-genesis-blocks-explained/&quot;&gt;You might think your code was executed, but it was actually
not.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Finding out what went wrong is not exactly straightforward.&lt;/li&gt;
  &lt;li&gt;The tooling sucks. Big time.&lt;/li&gt;
  &lt;li&gt;The
&lt;a href=&quot;http://swarm-guide.readthedocs.io/en/latest/introduction.html&quot;&gt;supporting&lt;/a&gt;
&lt;a href=&quot;https://github.com/ethereum/wiki/wiki/Whisper&quot;&gt;technologies&lt;/a&gt; are
just not there. Yet.&lt;/li&gt;
  &lt;li&gt;Changing your code once it is deployed, is impossible. You need to
think ahead.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;So is it a time to walk away? Definitely not. Every single problem can
be dealt with and many of them are being dealt with as we speak. And
yes, some of them might take a lot of time to get solved, but in the
meantime, we can use what we have or figure out some workaround with
other tools and services.&lt;/p&gt;

&lt;h2 id=&quot;endgame-web-3-and-dapps&quot;&gt;Endgame? Web 3 and Dapps&lt;/h2&gt;

&lt;p&gt;The grand vision that motivates people to solve all of the undeniable
problems the concept has, is called Web 3, for some reason. A fully
distributed and open network of nodes serving everything necessary for a
distributed application (called Dapp for short). Be it an application
code itself or its data. Pretty ambitious, right?&lt;/p&gt;

&lt;p&gt;And the solution is based on - wait for it - Javascript. What? How? A
picture is worth a thousand words, they
say:&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2018-03-28-blockchain-can-do__2.png&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;During smart contract compilation and deployment to the blockchain, an
ABI (Application Binary Interface) is produced. And that is nothing else
than a JSON object with method signatures. You can use these signatures
to produce bytecode that can be executed over the
&lt;a href=&quot;https://en.wikipedia.org/wiki/JSON-RPC&quot;&gt;JSON-RPC&lt;/a&gt; protocol directly on
any of the network’s nodes.&lt;/p&gt;

&lt;p&gt;That’s why &lt;a href=&quot;https://github.com/ethereum/web3.js/&quot;&gt;web3.js&lt;/a&gt; (and others
such as &lt;a href=&quot;https://github.com/ethers-io/ethers.js/&quot;&gt;ethers.js&lt;/a&gt;) was born.
It is a library that contains everything you need to interact with an
Ethereum node from the world of Javascript. And since you can build
client-facing applications with Javascript (using Angular, React, vue.js
or anything else you know), you can build the whole Dapp with
Javascript.&lt;/p&gt;

&lt;p&gt;So the idea is to serve application code from a distributed environment
like &lt;a href=&quot;https://ipfs.io/&quot;&gt;IPFS&lt;/a&gt; or
&lt;a href=&quot;https://ethereum.stackexchange.com/questions/375/what-is-swarm-and-what-is-it-used-for&quot;&gt;Swarm&lt;/a&gt;
and use blockchain for all client to client interactions, such as
payments or anything else that needs to be tracked. Of course, you are
not limited to Javascript, you can use whatever speaks JSON-RPC. But the
beauty of this solution is that almost every device has a browser that
can interpret Javascript. And therefore, run your Dapp.&lt;/p&gt;

&lt;h2 id=&quot;entering-the-real-world&quot;&gt;Entering the real world&lt;/h2&gt;

&lt;p&gt;Apparently, in spite of every problem the technology stack currently
has, it attracts many investors and even big, traditional companies,
such as
&lt;a href=&quot;https://www.tnooz.com/article/lufthansa-invests-blockchain-partners-winding-tree/&quot;&gt;Lufthansa&lt;/a&gt;,
&lt;a href=&quot;https://www.jpmorgan.com/global/blockchain&quot;&gt;J. P. Morgan&lt;/a&gt; or
&lt;a href=&quot;https://cointelegraph.com/news/walmart-to-implement-blockchain-based-delivery-system&quot;&gt;Walmart&lt;/a&gt;.
So there might be some future here.&lt;/p&gt;

&lt;p&gt;That’s why we started to work with &lt;a href=&quot;https://windingtree.com/&quot;&gt;Winding
Tree&lt;/a&gt; on their product that will try to change
the traveling industry forever. The core idea is to cut the middleman
and thus save money. This platform, powered by Ethereum blockchain,
should allow any hotel, airline or car rental company, to simply list
their inventory and accept bookings directly. And it should even
simplify the growth of the middlemen themselves by providing a
well-structured data of every member of the platform.&lt;/p&gt;

&lt;h2 id=&quot;this-cannot-work&quot;&gt;This cannot work&lt;/h2&gt;

&lt;p&gt;Well, we think it can and will. The idea might seem farfetched and there
are a lot of issues along the way, such as the very small throughput of
any blockchain. But there are very smart people already working on these
problems and in the near future, we might actually book hotels and
flights over a decentralized and open network.&lt;/p&gt;

&lt;p&gt;Do you like this idea, do you have any questions? Come join us on
&lt;a href=&quot;https://github.com/windingtree&quot;&gt;GitHub&lt;/a&gt;,
&lt;a href=&quot;https://t.me/windingtree&quot;&gt;Telegram&lt;/a&gt; or &lt;a href=&quot;https://windingtree.rocket.chat/home&quot;&gt;Rocket
Chat&lt;/a&gt;.&lt;/p&gt;</content><author><name>Jirka Chadima</name></author><category term="windingtree" /><category term="crypto" /><category term="blockchain" /><category term="ethereum" /><category term="líf" /><summary type="html">Blockchain is the new sexy. Everybody is talking about it, people in lines in grocery stores are discussing Bitcoin price, big companies are pouring tons of money in research. Everybody just wants to be a part of it. And from now on, so are we! It turns out, it’s just another young technology that we can handle.</summary></entry><entry><title type="html">Ideální bezdrátová sluchátka - špunty</title><link href="https://fragaria.cz/website/blog/2018/02/14/idealni-bezdratova-sluchatka-spunty/" rel="alternate" type="text/html" title="Ideální bezdrátová sluchátka - špunty" /><published>2018-02-14T08:05:00+00:00</published><updated>2018-02-14T08:05:00+00:00</updated><id>https://fragaria.cz/website/blog/2018/02/14/idealni-bezdratova-sluchatka-spunty</id><content type="html" xml:base="https://fragaria.cz/website/blog/2018/02/14/idealni-bezdratova-sluchatka-spunty/">&lt;p&gt;V &lt;a href=&quot;http://blog.fragaria.cz/2018/01/vybirame-bezdratova-sluchatka-uvod.html&quot;&gt;minulém
článku&lt;/a&gt;
jsme si prosvištěli teorii bezdrátového přenosu zvuku, takže teď už se
můžeme pustit do recenzí konkrétních sluchátek.&lt;/p&gt;

&lt;p&gt;Všechna popisovaná sluchátka jsem vlastnil nebo vlastním, takže
zkušenosti jsou založeny na delším používání. Na druhou stranu rozhodně
nejsem „absolutní sluchař“, takže ohledně zvukových kvalit mě berte
trochu s rezervou.&lt;/p&gt;

&lt;p&gt;Naopak na pohodlnost používání jsem pes :)&lt;/p&gt;

&lt;h2 id=&quot;meizu-ep51ep52&quot;&gt;Meizu EP51/EP52&lt;/h2&gt;

&lt;p&gt;Nejlevnější sluchátka, která za něco stojí se jmenují &lt;a href=&quot;https://www.gearbest.com/sports-fitness-headphones/pp_356162.html&quot;&gt;Meizu
EP51&lt;/a&gt;
a novější (a dražší) &lt;a href=&quot;https://www.meizu.com/en/accessory/ep52.html&quot;&gt;Meizu
EP52&lt;/a&gt;.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__1.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;Meizu mají tradičně řešené ovládání, které visí z pravé strany a
umožňuje ovládat hlasitost, zastavit/pustit hudbu a přeskakovat na
další nebo předchozí skladbu pomocí dvou respektive tří kliknutí.&lt;/p&gt;

&lt;p&gt;Hezká vychytávka je, že pecky jsou magnetické, takže po vyndání z uší se
dají na krku scvaknout dohromady a neriskujete ztrátu sluchátek.
&lt;strong&gt;EP52&lt;/strong&gt; dokonce tohle scvaknutí poznají a automaticky zapauzují
hudbu.&lt;/p&gt;

&lt;p&gt;Dalším zajímavým prvkem je plastová rozpěrka na každém sluchátku, která
se opře o vnitřek ucha a zaručuje, že sluchátko v uchu drží opravdu
dobře a nevypadne ani při běhání -
asi.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__2.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;h3 id=&quot;zvuk&quot;&gt;Zvuk&lt;/h3&gt;

&lt;p&gt;Obě verze podle mě hrají téměř stejně, bohužel EP51 jsem ztratil, takže
přímé porovnání neudělám.&lt;/p&gt;

&lt;p&gt;Zvuk trochu postrádá detaily. Zvlášť je to patrné u bicích, kde se ztratí živost
a bubny zní jako ze samplu. Výšky a středy jsou na tom lépe, ale pořád je
poznat, že jde o sluchátka za pár korun. V porovnání s RHA MA 750 se ztrácí
umístění nástrojů v prostoru. Já ale oceňuji, že zvuk je vyrovnaný a sluchátka
nejsou zbytečně přebasovaná.&lt;/p&gt;

&lt;p&gt;V balení nebyl pěnový nástavec Comply, takže jsem ho musel &lt;a href=&quot;https://www.audigo.cz/Prislusenstvi/Pro-sluchatka/Nausniky-a-nastavce/Comply-Tx-400-velikost-M&quot;&gt;koupit
zvlášť&lt;/a&gt; - mimochodem doporučuju pro libovolná sluchátka.&lt;/p&gt;

&lt;h3 id=&quot;kodeky&quot;&gt;Kodeky&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;SBC: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;AAC: &lt;strong&gt;NE&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;aptX: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;výdrž&quot;&gt;Výdrž&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Meizu EP51 - 6 hodin&lt;/li&gt;
  &lt;li&gt;Meizu EP52 - 8 hodin&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Nabíjení přes micro USB.&lt;/p&gt;

&lt;h3 id=&quot;cena&quot;&gt;Cena&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://www.gearbest.com/sports-fitness-headphones/pp_356162.html&quot;&gt;Meizu
EP51&lt;/a&gt;
stojí 27 dolarů, tedy asi 585 Kč. &lt;a href=&quot;https://www.gearbest.com/earbud-headphones/pp_719800.html&quot;&gt;Meizu
EP52&lt;/a&gt;
seženete za 90 dolarů, což jsou skoro 2000 Kč.&lt;/p&gt;

&lt;p&gt;Jednoznačně bych doporučoval ušetřit. Zvukově jsou sluchátka
srovnatelná, EP51 navíc nemají otravný nákrčník - za cenu o trochu
menší výdrže.&lt;/p&gt;

&lt;h2 id=&quot;rha-ma-750-wireless&quot;&gt;RHA MA 750 Wireless&lt;/h2&gt;

&lt;p&gt;Skotská firma RHA po úspěchu svých sluchátek &lt;strong&gt;MA 750&lt;/strong&gt; zkusila vydat i
jejich bezdrátovou
verzi.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__3.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;Musím říct, že jsem se na ně docela těšil a že jsem byl docela zklamaný.
Jednak nemám rád sluchátka s nákrčníkem - no a když ho &lt;strong&gt;MA 750
Wireless&lt;/strong&gt; musí mít, tak nechápu, proč jsou tak dlouhá. Pokud je vyndáte
z uší a pověsíte na krk, tak plandají někde okolo pupku. Proč?&lt;/p&gt;

&lt;p&gt;Na drouhou stranu mají stejnou vychytávku jako výše popisované &lt;strong&gt;Meizu
EP52&lt;/strong&gt; - po scvaknutí pecek k sobě se hudba automaticky zastaví.&lt;/p&gt;

&lt;p&gt;Musím pochválit výbavu - dostanete celou řadu náhradních špuntů do uší,
takže není problém vybrat správnou velikost pro libovolné
ucho.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__4.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;Pokud je budete kupovat, určitě si schovejte účtenku - na mých nefunguje
tlačítko „snížit hlasitost“ a kolegovi po 14 dnech přestalo hrát pravé
sluchátko. Bohužel jsme je oba koupili na letišti, takže máme smůlu.&lt;/p&gt;

&lt;h3 id=&quot;ovládání&quot;&gt;Ovládání&lt;/h3&gt;

&lt;p&gt;Ovládání je podobné jako u &lt;strong&gt;Meizu EP52&lt;/strong&gt;, kromě zapínacího tlačítka,
které je jako jediné umístěno přímo v nákrčníku. Opět se musím ptát -
proč?&lt;/p&gt;

&lt;p&gt;Sympatický detail je, že po zapnutí se ve sluchátkách ozve přijemný
hlas: „Battery level XX percent“. Takže máte aspoň hrubou představu o
tom, jak dlouho ještě vydrží hrát.&lt;/p&gt;

&lt;h3 id=&quot;zvuk-1&quot;&gt;Zvuk&lt;/h3&gt;

&lt;p&gt;Zvukově jsme tady úplně v jiné lize než u Meizu - což se při rozdílu v
ceně nedá divit. RHA se chlubí tím, že zvukovod sluchátka je kovový,
narozdíl od plastové konkurence.&lt;/p&gt;

&lt;p&gt;Nedokážu posoudit, jestli zrovna tohle je důvod, ale zvuk je krásně
detailní. Pokud si poslechnete stejnou písničku nejdřív na Meizu
EP51/EP52 a pak na RHA 750, budete překvapeni, kolik drobností vám
uniklo - činely, různá chřestidla a podobné drobnosti splynou na
levnějších sluchátkách do jednotného šumu na pozadí.&lt;/p&gt;

&lt;p&gt;I u vypalovaček typu &lt;em&gt;Highway to Hell&lt;/em&gt; nebo &lt;em&gt;Winnebago Warrior&lt;/em&gt; pořád
budete stíhat rozlišovat jednotlivé nástroje.&lt;/p&gt;

&lt;p&gt;Milovníci přebasovaných sluchátek budou opět zklamáni, ale já vyrovnaný
zvuk beru spíš jako plus.&lt;/p&gt;

&lt;h3 id=&quot;kodeky-1&quot;&gt;Kodeky&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;SBC: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;AAC: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;aptX: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;výdrž-1&quot;&gt;Výdrž&lt;/h3&gt;

&lt;p&gt;12 hodin, nabíjení přes USB C&lt;/p&gt;

&lt;h3 id=&quot;cena-1&quot;&gt;Cena&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://www.alza.cz/rha-ma750-wireless-d5145045.htm&quot;&gt;RHA MA 750
Wireless&lt;/a&gt; stojí
skoro 4 000,- Kč.&lt;/p&gt;

&lt;p&gt;Pokud chcete ušetřit, pak existuje i &lt;a href=&quot;https://www.alza.cz/rha-ma650-wireless-d5145044.htm&quot;&gt;RHA MA 650
Wireless&lt;/a&gt; za 2
700,- Kč, což je skoro stejná cena jako &lt;a href=&quot;https://www.alza.cz/rha-ma750-d1531779.htm&quot;&gt;drátová verze RHA
MA 750i&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Těžko poradit - u recenzí drátových modelů se jednoznačně doporučovalo
připlatit si za dražší model, ale tam byl cenový rozdíl jen asi 500,-
Kč.&lt;/p&gt;

&lt;p&gt;Já osobně bych si počkal na další verzi - zvukově jsou super, ale na
používání mě nějak nebaví…&lt;/p&gt;

&lt;h2 id=&quot;beoplay-e8&quot;&gt;Beoplay E8&lt;/h2&gt;

&lt;p&gt;Ještě víc než na &lt;strong&gt;RHA MA 750 Wireless&lt;/strong&gt; jsem se těšil na &lt;strong&gt;Beoplay
E8&lt;/strong&gt;, takže jsem je koupil, aniž bych ověřil, že umí zpracovat &lt;strong&gt;aptX&lt;/strong&gt;.
Neumí.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__5.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;Naštěstí můj telefon (OnePlus 5) si poradí i s &lt;strong&gt;AAC&lt;/strong&gt;, jinak bych byl
dost namíchnutý.&lt;/p&gt;

&lt;p&gt;Jinak ale &lt;strong&gt;Beoplay E8&lt;/strong&gt; nabízí samá pozitiva a sociální jistoty. První,
co vás překvapí proti fotkám - sluchátka jsou maličká. Fakt. Tak
maličká, že když je vyndám z uší, putují okamžitě do krabičky - jinak
bych je určitě ztratil.&lt;/p&gt;

&lt;p&gt;Druhá věc je, že hodně dobře drží v uších - přestože nemají žádné
vychytávky, které by tomu měly napomoci. Asi bych si s nimi netroufl
běhat - koneckonců &lt;a href=&quot;https://www.youtube.com/watch?v=d27gTrPPAyk&quot;&gt;gentleman se k běhu
nesníží&lt;/a&gt; - ale dopravu
tramvají po Praze zvládají dobře.&lt;/p&gt;

&lt;p&gt;Když už jsme u těch tramvají. Velice rychle zjistíte, že stoupnout si v
tramvaji k trafu je velká blbost. Přeci jen sluchátka nejsou propojená
kabelem, takže jsou na rušení trochu náchylnější. Ale většinou se stačí
posunout o metr a všechno je zase v pořádku.&lt;/p&gt;

&lt;h3 id=&quot;ovládání-1&quot;&gt;Ovládání&lt;/h3&gt;

&lt;p&gt;Narozdíl od ostatních sluchátek v článku nemají &lt;strong&gt;Beoplay E8&lt;/strong&gt;
samostatné ovládání - kde by taky bylo. Ovládají se pomocí dotykových
plošek na obou peckách.&lt;/p&gt;

&lt;p&gt;Jeden dotyk na pravém uchu zastaví nebo pustí muziku, jeden na levém
zapne hlasitý odposlech (o tom si povíme dále).&lt;/p&gt;

&lt;p&gt;Dva dotyky na pravém (nebo levém) sluchátku přeskočí písničku dopředu
(nebo dozadu). Tři dotyky na pravém sluchátku zapnou Google Asistenta
nebo Siri - podle telefonu.&lt;/p&gt;

&lt;p&gt;Hlasitost se ovládá delším držením pravého (zesílit) nebo levého
(zeslabit) sluchátka. Párování s novým telefonem se provádí současným stiskem na obou
sluchátkách.&lt;/p&gt;

&lt;p&gt;Je vidět, že nad ovládáním někdo docela přemýšlel, protože je snadno
pochopitelné. Jediný problém s „dvojklikem“. Když ho provedete
dostatečně rychle, sluchátka ho vyhodnotí jako jednoklik a místo
přeskočení písničky jí zastaví.&lt;/p&gt;

&lt;p&gt;Kdo přemýšlel už míň, jsou vývojáři Bluetooth modulu - s žádnými jinými
sluchátky jsem neměl takový problém s párováním s telefonem. Vetšinou se
to povede tak napotřetí, takže trpělivost!&lt;/p&gt;

&lt;h3 id=&quot;zvuk-2&quot;&gt;Zvuk&lt;/h3&gt;

&lt;p&gt;Jako byl rozdíl mezi &lt;strong&gt;Meizu EP52&lt;/strong&gt; a &lt;strong&gt;RHA MA 750&lt;/strong&gt;, tak takový rozdíl
mezi &lt;strong&gt;RHA MA 750&lt;/strong&gt; a &lt;strong&gt;Beoplay E8&lt;/strong&gt; rozhodně není.&lt;/p&gt;

&lt;p&gt;Skoro bych řekl, že oboje sluchátka už jsou u mě na hranici toho, co
dokážu poznat - znějí mi téměř stejně. Čistě pocitově, &lt;strong&gt;Beoplay E8&lt;/strong&gt;
mají zvuk trošku teplejší, &lt;strong&gt;RHA MA 750&lt;/strong&gt; se mi zdají víc analyticky
přesná.&lt;/p&gt;

&lt;p&gt;Ale to jsou jen takový rádoby chytrý kecy. Pro mě jsou oboje sluchátka
zvukově na podobné úrovni a oboje super!&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Beoplay E8&lt;/strong&gt; jsou jedny z mála sluchátek, ve kterých si můžete hrát se
zvukem pomocí obslužné aplikace v telefonu.&lt;/p&gt;

&lt;p&gt;Není to klasický ekvalizér, ale něco, kde pomocí kuličky nastavujete
vlastnosti zvuku ve čtverci popsaném nadpisy jako &lt;em&gt;warm&lt;/em&gt;, &lt;em&gt;excited&lt;/em&gt;,
&lt;em&gt;relaxed&lt;/em&gt; nebo
&lt;em&gt;bright&lt;/em&gt;.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__6.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;ul&gt;
  &lt;li&gt;tažením směrem k &lt;em&gt;bright&lt;/em&gt; a &lt;em&gt;excited&lt;/em&gt; zvýrazníte výšky, s tím že u
&lt;em&gt;excited&lt;/em&gt; zůstanu zvýrazněné i středy&lt;/li&gt;
  &lt;li&gt;přetažení směrem &lt;em&gt;warm&lt;/em&gt; zvýrazní basy, &lt;em&gt;relaxed&lt;/em&gt; basy i středy&lt;/li&gt;
  &lt;li&gt;zajímavá legrace je dvěma prsty kuličku „roztáhnout“ - hudba
pocitově rozšíří více do stran.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Mimochodem - i když se to v některých recenzích dočtete, tak &lt;em&gt;nemají&lt;/em&gt;
aktivní potlačení okolního hluku!&lt;/p&gt;

&lt;p&gt;Zajímavou funkcí je aktivní odposlech okolí - pokud si jdete koupit
kafe, nemusíte vyndavat sluchátka z ucha. Stačí ťuknout na levé
sluchátko, zapnou se mikrofony a do uší vám půjde zesílený zvuk z
okolí. Objednáte si a dalším ťuknutím na levé sluchátko zase pustíte
hudbu.&lt;/p&gt;

&lt;h3 id=&quot;kodeky-2&quot;&gt;Kodeky&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;SBC: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;AAC: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;aptX: &lt;strong&gt;NE&lt;/strong&gt; (proboha proč?!)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;výdrž-2&quot;&gt;Výdrž&lt;/h3&gt;

&lt;p&gt;3 hodiny, v krabičce se dobijí ještě na 2x3 hodiny. Nabíjení přes micro
USB.&lt;/p&gt;

&lt;h3 id=&quot;cena-2&quot;&gt;Cena&lt;/h3&gt;

&lt;p&gt;Nejlevněji je &lt;a href=&quot;https://beostore.cz/produkty/e8-beoplay-charcoalgray&quot;&gt;seženete v
Beostore&lt;/a&gt; za 7
700,- Kč. Alza si &lt;a href=&quot;https://www.alza.cz/beoplay-e8-natural-d5126238.htm&quot;&gt;řekne o 8 000,-
Kč&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Jo. Je to raketa. Za sluchátka.&lt;/p&gt;

&lt;p&gt;Ale můžu vám slíbit, že pokud si je pořídíte, tak dlouho nebudete chtít
jiné. Už proto, že na ně nebudete mít peníze 🤑.&lt;/p&gt;</content><author><name>Lukáš Marek</name></author><category term="rha" /><category term="aac" /><category term="sluchátka" /><category term="bluetooth" /><category term="beoplay" /><category term="aptx" /><category term="meizu" /><category term="iphone" /><category term="android" /><summary type="html">V minulém článku jsme si prosvištěli teorii bezdrátového přenosu zvuku, takže teď už se můžeme pustit do recenzí konkrétních sluchátek.</summary></entry><entry><title type="html">Mapujeme adresy do českých krajů</title><link href="https://fragaria.cz/website/blog/2018/02/05/mapujeme-adresy-do-ceskych-kraju/" rel="alternate" type="text/html" title="Mapujeme adresy do českých krajů" /><published>2018-02-05T08:56:00+00:00</published><updated>2018-02-05T08:56:00+00:00</updated><id>https://fragaria.cz/website/blog/2018/02/05/mapujeme-adresy-do-ceskych-kraju</id><content type="html" xml:base="https://fragaria.cz/website/blog/2018/02/05/mapujeme-adresy-do-ceskych-kraju/">&lt;p&gt;Občas potkáte jako vývojář zábavné a jednoduché zadání, jako třeba
“&lt;strong&gt;Vím, že lidé platí v mých prodejnách po celé republice. Chtěl bych
vědět, kolik se toho děje v každém kraji.&lt;/strong&gt;” Zkušený borec si řekne, že
prostě vezme mapu krajů, na ně napáruje adresy prodejen a hotovo… V tu
chvíli ale netuší, že před ním leží křivolaká cesta plná slepých uliček,
nezrušených zákonů, neúplných datových zdrojů a zajímavých
algoritmů.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-05-mapujeme-adresy-do-ceskych-kraju__1.png&quot; /&gt;

&lt;/figure&gt;

&lt;h2 id=&quot;hledáme-data&quot;&gt;Hledáme data&lt;/h2&gt;

&lt;p&gt;Na úvod se sluší říct, co všechno o prodejně víme:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Ulice, město, PSČ, stát - to se píše na obálky, to známe&lt;/li&gt;
  &lt;li&gt;GPS souřadnice - to se píše do mobilů, to známe&lt;/li&gt;
  &lt;li&gt;RUIAN ID - Cože?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;https://vdp.cuzk.cz/&quot;&gt;RUIAN&lt;/a&gt; (Registr územní identifikace, adres a
nemovitostí) je státní katalog, který se používá zejména pro katastrální
účely a hodí se při práci s mapovými podklady, adresními místy a dalšími
prvky, které se týkají fyzického umístění nějakého objektu v krajině. To
zní skvěle, tam určitě budou kraje! No, nejsou.&lt;/p&gt;

&lt;h2 id=&quot;slepá-ulička&quot;&gt;Slepá ulička?&lt;/h2&gt;

&lt;p&gt;PSČ všichni běžně používáme pro adresování dopisů, a asi také každý
víme, že specifické PSČ přísluší specifické poště, která obsluhuje
nějaké území. To by mohlo pasovat s kraji! No, nepasuje.&lt;/p&gt;

&lt;p&gt;Na webu České pošty se k seznamu všech PSČ samozřejmě
&lt;a href=&quot;https://www.ceskaposta.cz/ke-stazeni/zakaznicke-vystupy&quot;&gt;dostanete&lt;/a&gt;
(&lt;em&gt;Seznam PSČ částí obcí a obcí bez částí&lt;/em&gt;), ale když se do něj podíváte,
zjistíte, že nejvyšší celek, který se k PSČ dozvíte, je okres. Moment,
my ještě máme okresy? Ano, máme. A stejně tak máme &lt;strong&gt;dvoje&lt;/strong&gt; kraje.
Cože? Skutečně, dle zákonných norem u nás stále rozlišujeme kraje
&lt;a href=&quot;https://cs.wikipedia.org/wiki/Okresy_v_%C4%8Cesku&quot;&gt;územní a
samosprávní&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Nicméně s tím už se dá pracovat, takže si vesele vyrobíte mapování PSČ
-&amp;gt; okres -&amp;gt; kraj a myslíte si, že máte hotovo. Chyba lávky! Ukazuje
se totiž (a vzhledem k často diskutovanému rušení a slučování vesnických
pošt se to dalo čekat), že jedno PSČ může sahat klidně do třech okresů.
Těch případů je zhruba 10 %, a to se bohužel zanedbat nedá, potřebujeme
pro tyhle případy náhradní řešení.&lt;/p&gt;

&lt;h2 id=&quot;hledáme-data-podruhé&quot;&gt;Hledáme data podruhé&lt;/h2&gt;

&lt;p&gt;Takže přichází na řadu GPS souřadnice, s nimi to musí být brnkačka.
Kraje nejsou nic jiného než polygony, a algoritmů na párování bodu do
polygonu existuje &lt;a href=&quot;http://erich.realtimerendering.com/ptinpoly/&quot;&gt;celá
řada&lt;/a&gt;. Ale kde vzít ty
polygony? Katastrální úřad? Tam už jsme byli a našli RUIAN. Ministerstvo
vnitra? Jestli taková data poskytují, tak je mají pečlivě schovaná.
Jednotlivé kraje? Spíš ne. Český statistický úřad? Do nich jsem vkládal
velkou naději, a taky nic. My si snad budeme muset obkreslit mapu!&lt;/p&gt;

&lt;p&gt;Naštěstí po chvíli googlení najdete přesně to, &lt;a href=&quot;https://navigovat.mobilmania.cz/clanky/navod-pro-gsak-jak-rozdelit-ceske-geokese-podle-kraju/sc-265-a-1313623/default.aspx&quot;&gt;co
potřebujete&lt;/a&gt;.
V 10 let starém článku. Tak si s tím chvíli hrajete, začnete psát testy,
a najednou vám zcela náhodně vybraná souřadnice nefunguje. Co to?
Hranice krajů se totiž &lt;a href=&quot;https://www.czso.cz/csu/xb/uzemni_zmeny&quot;&gt;můžou&lt;/a&gt;
měnit! Třeba když se rozpustí nějaký ten vojenský újezd. Takže data
jsou to sice pěkná, ale zastaralá. Co teď? Vážně jdeme obkreslovat
mapu?&lt;/p&gt;

&lt;h2 id=&quot;open-street-map-zachraňuje&quot;&gt;Open Street Map zachraňuje&lt;/h2&gt;

&lt;p&gt;Není třeba, na záchranu přispěchá Open Street Map a jejich
&lt;a href=&quot;https://overpass-turbo.eu/&quot;&gt;Overpass&lt;/a&gt;. Se &lt;a href=&quot;https://overpass-turbo.eu/s/vAm&quot;&gt;správně formulovaným
dotazem&lt;/a&gt; je získání hranic krajů
hračka. Mimochodem povšimněte si, že zdrojem dat je náš národní
katastrální úřad a jeho dataset s povědomým jménem RUIAN. No prostě
Koucourkov. Odtud už je jen krůček k automatizaci celého našeho
datasetu.&lt;/p&gt;

&lt;p&gt;A jeho hezké vizualizaci přímo na githubu (samozřejmě bez těch PSČ, ale
zase si můžete všimnout hraničních kamenů):&lt;/p&gt;

&lt;p&gt;V samotné aplikaci už je to pak jen otázka načtení
&lt;a href=&quot;https://github.com/JirkaChadima/cz-region-boundaries/blob/master/data/gps/all.txt&quot;&gt;dvou&lt;/a&gt;
&lt;a href=&quot;https://github.com/JirkaChadima/cz-region-boundaries/blob/master/data/zip/zip-region.csv&quot;&gt;souborů&lt;/a&gt;
a můžeme vesele párovat: Kvůli výkonu to zkusíme samozřejmě nejdřív
podle PSČ a když se zrovna trefíme do nejednoznačně určitelného, tak
použijeme jeden z algoritmů pro hledání bodu v polygonu.&lt;/p&gt;

&lt;h2 id=&quot;a-přitom-taková-blbost&quot;&gt;A přitom taková blbost&lt;/h2&gt;

&lt;p&gt;Ano, snad jen slovy klasika lze uzavřít tuhle odyseu. Na druhou stranu
možná jenom neumím hledat ve státních datech a některý z mnoha úřadů má
krasný portál s open-geodaty týkajícími se nejen krajů, ale třeba i měst
a dalších územních ploch. Jestli o něm víte, napište nám!&lt;/p&gt;

&lt;p&gt;Věřím tomu, že se někomu tahle data mohou hodit, takže všechny zdrojáky
a data najdete na
&lt;a href=&quot;https://github.com/JirkaChadima/cz-region-boundaries&quot;&gt;GitHubu&lt;/a&gt;,
nepravidelně je aktualizuju.&lt;/p&gt;</content><author><name>Jirka Chadima</name></author><category term="geodata" /><category term="openstreetmap" /><category term="javascript" /><summary type="html">Občas potkáte jako vývojář zábavné a jednoduché zadání, jako třeba “Vím, že lidé platí v mých prodejnách po celé republice. Chtěl bych vědět, kolik se toho děje v každém kraji.” Zkušený borec si řekne, že prostě vezme mapu krajů, na ně napáruje adresy prodejen a hotovo… V tu chvíli ale netuší, že před ním leží křivolaká cesta plná slepých uliček, nezrušených zákonů, neúplných datových zdrojů a zajímavých algoritmů.</summary></entry><entry><title type="html">Ideální bezdrátová sluchátka - díl 1.</title><link href="https://fragaria.cz/website/blog/2018/01/23/vybirame-bezdratova-sluchatka-uvod/" rel="alternate" type="text/html" title="Ideální bezdrátová sluchátka - díl 1." /><published>2018-01-23T09:43:00+00:00</published><updated>2018-01-23T09:43:00+00:00</updated><id>https://fragaria.cz/website/blog/2018/01/23/vybirame-bezdratova-sluchatka-uvod</id><content type="html" xml:base="https://fragaria.cz/website/blog/2018/01/23/vybirame-bezdratova-sluchatka-uvod/">&lt;p&gt;Jestli jste pod stromečkem našli nový telefon, je dost slušná šance, že
mu chybí „díra“ na sluchátka. Můj telefon sice vstup na jack má, ale
když jsem se podesáté zamotal do kabelu vedoucímu z kapsy, řekl jsem
si, že to zkusím bez drátů a začal hledat ideální bezdrátová
sluchátka.&lt;/p&gt;

&lt;p&gt;A protože celý proces byl dlouhý a hlavně dost drahý, chci se s Vámi
podělit o svá
zjištění.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__1.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;Dráty, bezdráty, kde je rozdíl?&lt;/p&gt;

&lt;p&gt;Málokdo (dobře, já to třeba dlouho nevěděl) si uvědomuje, že hlavní
rozdíl mezi drátovými a bezdrátovými sluchátky je místo „vzniku“
zvuku.&lt;/p&gt;

&lt;p&gt;U normálních sluchátek zvuk „vzniká“ v D/A převodníku přímo v telefonu a
kabelem je veden do sluchátek. To znamená, že když máte telefon se
špatným D/A převodníkem, je skoro jedno, jak drahá drátová sluchátka
si koupíte. Zvuk nebude stát za nic.&lt;/p&gt;

&lt;p&gt;Existují telefony (například &lt;a href=&quot;https://tech.ihned.cz/c1-66025270-test-lg-v30-zachranuje-povest-korejskeho-vyrobce-ma-chyby-ale-milovniky-hudby-nadchne&quot;&gt;LG
V30&lt;/a&gt;),
které se kupují jen kvůli kvalitě D/A převodníku.&lt;/p&gt;

&lt;p&gt;U bezdrátových sluchátek je situace opačná - z telefonu se posílá
vzduchem digitální signál, který je převáděn na analogový až v
elektronice sluchátek.
To je mimochodem i důvod, proč pro bezdrátová sluchátka není možné v
telefonu použít ekvalizér.&lt;/p&gt;

&lt;p&gt;Na druhou stranu si díky tomu i s relativně špatným telefonem můžete
užít dobrý poslech - pokud investujete do pořádných sluchátek a
trefíte správně kodeky.&lt;/p&gt;

&lt;h2 id=&quot;nebojte-se-o-kvalitu-zvuku&quot;&gt;(Ne)bojte se o kvalitu zvuku&lt;/h2&gt;

&lt;p&gt;Kodek - to je protokol, kterým se z telefonu do sluchátek přenáší
digitální informace o zvuku.&lt;/p&gt;

&lt;p&gt;A tady je kámen úrazu. Zjistit, jestli se telefon se sluchátky domluvil
na nejkvalitnějším možném kodeku je práce buď pro netopýra nebo
programátora (který mrkne do logů).&lt;/p&gt;

&lt;p&gt;Běžný smrtelník akorát pozná, že nová a drahá sluchátka hrají „tak ňák
blbě“.&lt;/p&gt;

&lt;h3 id=&quot;sbc&quot;&gt;SBC&lt;/h3&gt;

&lt;p&gt;„Tak ňák blbě“ kodek se odborně jmenuje &lt;strong&gt;SBC&lt;/strong&gt; a je to nejstarší
Bluetoothový způsob přenosu stereo zvuku. Vznikl v roce 2003 a tenkrát
stačilo, že to nějak hraje - kdo by ještě řešil kvalitu zvuku? Jenže
ještě teď v roce 2018, existuje spousta telefonů, které nic jiného
neumí. A i když umí, tak často „pro jistotu“ stejně použijí &lt;strong&gt;SBC&lt;/strong&gt;.&lt;/p&gt;

&lt;h3 id=&quot;aptx-aptx-hd&quot;&gt;aptX, aptX HD&lt;/h3&gt;

&lt;p&gt;S rozmachem bezdrátových sluchátek a reproduktorů se ukázala nutnost
nahradit &lt;strong&gt;SBC&lt;/strong&gt; kodek něčím kvalitnějším, takže byl vymyšlen kodek
&lt;strong&gt;aptX&lt;/strong&gt;, který je o &lt;a href=&quot;https://www.lifewire.com/aptx-bluetooth-codec-4151667&quot;&gt;něco
lepší&lt;/a&gt; ve
smyslu, že dokáže přenést více dat za stejnou dobu.
Má také &lt;a href=&quot;https://www.rtings.com/headphones/learn/sbc-aptx-which-bluetooth-codec-is-the-best&quot;&gt;menší
zpoždění&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;jestli se vám při sledování Youtube zpožďuje zvuk za obrazem,
posloucháte v &lt;strong&gt;SBC&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Existují ještě kvalitnější varianty &lt;strong&gt;aptX HD&lt;/strong&gt;, &lt;strong&gt;aptX Low Latency&lt;/strong&gt;,
ale s těmi si nelámejte hlavu. Existuje jen minimum sluchátek a
telefonů, které by je podporovaly.&lt;/p&gt;

&lt;h3 id=&quot;aac&quot;&gt;AAC&lt;/h3&gt;

&lt;p&gt;Soudruzi v Apple, když viděli ten bordel v bezdrátových protokolech, se
ho rozhodli vyřešit jednoduše - přidali protokol vlastní - &lt;strong&gt;AAC&lt;/strong&gt;.
iPhony (a iPady) tedy na nějaké &lt;strong&gt;aptX&lt;/strong&gt; kašlou a podporují pouze
&lt;strong&gt;AAC&lt;/strong&gt;. Naopak MacBooky umí obojí.&lt;/p&gt;

&lt;h2 id=&quot;lepší-časy-asi-přijdou&quot;&gt;Lepší časy asi přijdou&lt;/h2&gt;

&lt;p&gt;Dobrá zpráva je, že Qualcomm (výrobce procesorů telefonu) zařadil
podporu &lt;strong&gt;aptX&lt;/strong&gt; a &lt;strong&gt;AAC&lt;/strong&gt; do všech svých nových čipsetů (tuším od
Snapdragonu 820).&lt;/p&gt;

&lt;p&gt;Horší zpráva je, že výrobci samotných telefonů podporu mohou softwarově
vypnout a často to také dělají.&lt;/p&gt;

&lt;p&gt;No a ke všemu ještě výrobci sluchátek podporů kodeků buď tají nebo k ní
přistupují úplně nelogicky. Například &lt;strong&gt;Beoplay&lt;/strong&gt; u modelu &lt;strong&gt;H8&lt;/strong&gt;
&lt;strong&gt;aptX&lt;/strong&gt; podporuje, u novějšího modelu &lt;strong&gt;E8&lt;/strong&gt; už ne.&lt;/p&gt;

&lt;h2 id=&quot;stabilita-spojení&quot;&gt;Stabilita spojení&lt;/h2&gt;

&lt;p&gt;Častým argumentem proti bezdrátovým sluchátkům jsou výpadky spojení. Je
pravda, že to je trochu magie - pokud posloucháte v práci a telefon je
položený na stole, tak je to většinou bez problémů.&lt;/p&gt;

&lt;p&gt;Při chůzi je to horší - většina sluchátek má Bluetooth přijímač umístěný
na pravé straně, takže základ je mít telefon v pravé kapse. Stejně se
ale stane, že se ohlédnete doprava, přijímač se dostane nad rameno
(pokud je přímo ve sluchátku) a spojení na vteřinku vypadne.&lt;/p&gt;

&lt;p&gt;Nezáleží na ceně sluchátek, dělají mi to všechny. Vzhledem k tomu, že se
mi to stane maximálně jednou za hodinu, neberu to jako velký problém.&lt;/p&gt;

&lt;h2 id=&quot;co-si-mám-sakra-koupit&quot;&gt;Co si mám sakra koupit?&lt;/h2&gt;

&lt;p&gt;Celé to složité povídání se dá zjednodušit do následujícího doporučení:
Pokud máte &lt;strong&gt;iPhone&lt;/strong&gt;, hledejte sluchátka s podporou kodeku &lt;strong&gt;AAC&lt;/strong&gt;, s
&lt;strong&gt;Androidem&lt;/strong&gt; se rozhlížejte po modelech s &lt;strong&gt;aptX&lt;/strong&gt;.
A doufejte.&lt;/p&gt;

&lt;h2 id=&quot;nezapomeňte-na-nastavení-kvality&quot;&gt;Nezapomeňte na nastavení kvality&lt;/h2&gt;

&lt;p&gt;Mimochodem, drahá (drátová i bezdrátová) sluchátka vám pravděpodobně
hrají “tak ňák blbě”, protože máte ve Spotify (nebo Google Music)
nastavenou mizernou kvalitu zvuku. Takže šup do nastavení a opravit.
Nemáte
zač.&lt;/p&gt;

&lt;h4 id=&quot;spotify&quot;&gt;Spotify&lt;/h4&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__2.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;h4 id=&quot;google-play-music&quot;&gt;Google Play Music&lt;/h4&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__3.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;Příští týden se podíváme na bezdrátová sluchátka do uší (pecky).&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&lt;span class=&quot;underline&quot;&gt;Redakční poznámka:&lt;/span&gt; Tento blog stál Krtka
opravdu dost peněz, tak doufáme v rekordní čtenost.&lt;/em&gt;&lt;/p&gt;</content><author><name>Lukáš Marek</name></author><category term="aac" /><category term="sluchátka" /><category term="bluetooth" /><category term="aptx" /><category term="iphone" /><category term="android" /><summary type="html">Jestli jste pod stromečkem našli nový telefon, je dost slušná šance, že mu chybí „díra“ na sluchátka. Můj telefon sice vstup na jack má, ale když jsem se podesáté zamotal do kabelu vedoucímu z kapsy, řekl jsem si, že to zkusím bez drátů a začal hledat ideální bezdrátová sluchátka.</summary></entry><entry><title type="html">Elasticsearch 6.0 se blíží</title><link href="https://fragaria.cz/website/blog/2017/12/01/elasticsearch-60-se-blizi/" rel="alternate" type="text/html" title="Elasticsearch 6.0 se blíží" /><published>2017-12-01T12:24:00+00:00</published><updated>2017-12-01T12:24:00+00:00</updated><id>https://fragaria.cz/website/blog/2017/12/01/elasticsearch-60-se-blizi</id><content type="html" xml:base="https://fragaria.cz/website/blog/2017/12/01/elasticsearch-60-se-blizi/">&lt;p&gt;V říjnu mi přistála do mailu pozvánka na výlet do do Mnichova s firmou
Elastic. Docela jsem se těšil, než jsem zjistil, že Octoberfest se
navzdory jménu konal už v září. Sice to tedy bylo bez piva, ale aspoň si
většinu představených novinek pamatuju.&lt;/p&gt;

&lt;p&gt;Mimochodem, Elasticsearch verze 6.0 bude představen 6. prosince 2017 v
17.00 hodin. Pokud máte chuť, můžete celou událost &lt;a href=&quot;https://www.elastic.co/live/v6?elektra=home&amp;amp;storm=banner&quot;&gt;sledovat
online&lt;/a&gt;.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2017-12-01-elasticsearch-60-se-blizi__1.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;Protože jsme Elasticsearch na blogu chvíli zanedbávali, vypíchnu tu pár
novinek verze 6.0 (a někdy i 5.0).&lt;/p&gt;

&lt;h2 id=&quot;šifrování-5x&quot;&gt;Šifrování (5.x)&lt;/h2&gt;

&lt;p&gt;Pokud ukládáte do Elasticsearch citlivá data, existuje nepodporovaná
(ale vyzkoušená) cesta, jak zašifrovat celý index na disku.&lt;/p&gt;

&lt;p&gt;Jestli se smíříte s cca 5% poklesem výkonnosti, můžete celý index
zašifrovat pomocí standardního
&lt;a href=&quot;https://en.wikipedia.org/wiki/Dm-crypt&quot;&gt;dm-cryptu&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;painless-5x&quot;&gt;Painless (5.x)&lt;/h2&gt;

&lt;p&gt;Skriptování v Elasticsearch je sice mocná zbraň, ale také zdroj
bezpečnostních problémů. V minulosti Elastic používal jako defaultní
skriptovací jazyk Groovy, který se jim ovšem nikdy nepodařilo pořádně
sandboxovat.&lt;/p&gt;

&lt;p&gt;Problém se spíše obcházel pomocí pojmenovaných skriptů definovaných v
konfiguraci Elasticsearch a odkazovaných pouze jménem, což bylo dost
nepraktické.&lt;/p&gt;

&lt;p&gt;Řešením je nový jazyk
&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/painless/master/painless-getting-started.html&quot;&gt;Painless&lt;/a&gt;,
který je v podstatě totožný s Groovy, ale neobsahuje “nebezpečné”
metody.&lt;/p&gt;

&lt;h2 id=&quot;elastic-cloud-enterprise-x-pack&quot;&gt;Elastic Cloud Enterprise (X-Pack)&lt;/h2&gt;

&lt;p&gt;Několik našich zákazníků provozuje víc Elasticsearch clusterů.
Koneckonců, sám Elastic doporučuje monitoring umístit do samostatného
clusteru - takže i pro základní použití jsou potřeba dva clustery.&lt;/p&gt;

&lt;p&gt;Spravovat pár takových clusterů může být klidně práce na plný úvazek. To
by ale znamenalo, že provozovat &lt;a href=&quot;https://www.elastic.co/cloud&quot;&gt;vlastní cloudové
řešení&lt;/a&gt; bude práce na pár desítek
úvazků?&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://www.elastic.co/assets/bltf1e9537b10e91151/cluster-optimized.gif&quot; alt=&quot;cluster
management&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ne. Celý Elastic Cloud spravuje 5 lidí. Proč? Protože mají vymakaný
administrační nástroj, který je teď nově k dispozici i pro zákazníky
Elasticu.&lt;/p&gt;

&lt;p&gt;Elastic Cloud Enterprise je vlastně virtualizační nástroj. Jednotlivé
clustery a nody jsou vytvářeny a spouštěny podle potřeby, je možné
jednoduše měnit jejich umístění, velikost a dokonce bezodstávkově
updatovat cluster na novější verzi Elasticsearch.&lt;/p&gt;

&lt;p&gt;Samozřejmě je možné mít clustery s různou verzí Elasticsearch vedle
sebe.&lt;/p&gt;

&lt;h2 id=&quot;machine-learning-x-pack&quot;&gt;Machine learning (X-Pack)&lt;/h2&gt;

&lt;p&gt;Osobně považuji strojové učení za největší pecku v novém Elasticsearch a
mrzí mě, že jsem ho ještě nestihl vyzkoušet.&lt;/p&gt;

&lt;p&gt;Je to totiž první “strojové učení pro blbé” - není třeba vytvářet žádné
neuronové sítě, prostě přidáváte data do Elasticsearch a ten si průběžně
vytváří model a dokáže upozornit na anomálie.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://www.elastic.co/assets/blt484d90d927bee30d/machine-learning-anomaly.jpg&quot; alt=&quot;machine
learning&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Strojovému učení v Elasticsearch se budu určitě ještě tady na blogu
věnovat.&lt;/p&gt;

&lt;h2 id=&quot;predictions-api-x-pack-62&quot;&gt;Predictions API (X-Pack, 6.2)&lt;/h2&gt;

&lt;p&gt;Když už máme strojové učení, další logický krok je predikce. K dispozici
bude asi až ve verzi 6.2.&lt;/p&gt;

&lt;h2 id=&quot;performance-monitoring-x-pack-6x&quot;&gt;Performance monitoring (X-Pack, 6.X)&lt;/h2&gt;

&lt;p&gt;Elastic poslední dobou hojně nakupuje další firmy. Strojové učení je
výsledkem akvizice, výsledkem &lt;a href=&quot;https://opbeat.com/blog/posts/welcome-opbeat-to-the-elastic-family/&quot;&gt;dalšího
nákupu&lt;/a&gt;
je vstup na pole &lt;a href=&quot;https://techcrunch.com/2017/06/22/elastic-enters-apm-space-with-opbeat-acquisition/&quot;&gt;performance
monitoringu&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://opbeat.com/blog/posts/welcome-opbeat-to-the-elastic-family/opbeat-timeline-ui.png&quot; alt=&quot;performance-monitoring&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Mrkněte na stránky firmy &lt;a href=&quot;https://opbeat.com&quot;&gt;opbeat&lt;/a&gt;, kde si uděláte
obrázek, co se chystá.&lt;/p&gt;</content><author><name>Lukáš Marek</name></author><category term="elasticsearch" /><category term="pivo" /><category term="elastic" /><summary type="html">V říjnu mi přistála do mailu pozvánka na výlet do do Mnichova s firmou Elastic. Docela jsem se těšil, než jsem zjistil, že Octoberfest se navzdory jménu konal už v září. Sice to tedy bylo bez piva, ale aspoň si většinu představených novinek pamatuju.</summary></entry><entry><title type="html">Ohlédnutí ex-vědce</title><link href="https://fragaria.cz/website/blog/2017/11/10/ohlednuti-ex-vedce/" rel="alternate" type="text/html" title="Ohlédnutí ex-vědce" /><published>2017-11-10T00:09:00+00:00</published><updated>2017-11-10T00:09:00+00:00</updated><id>https://fragaria.cz/website/blog/2017/11/10/ohlednuti-ex-vedce</id><content type="html" xml:base="https://fragaria.cz/website/blog/2017/11/10/ohlednuti-ex-vedce/">&lt;p&gt;V tomto textu bych se rád ohlédnul za svou vědeckou kariérou i důvody,
proč jsem od ní nakonec upustil a vrhl se na programování.&lt;/p&gt;

&lt;p&gt;Aby se nejednalo jen o osobní zpověď, snažím se zde zahrnout co možná
nejvíce postřehů, které se snad zcela neutonou v poněkud krkolomném
slohu.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2017-11-10-ohlednuti-ex-vedce__1.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;h3 id=&quot;kdo-je-to-fyzik&quot;&gt;Kdo je to fyzik?&lt;/h3&gt;

&lt;p&gt;Co se týče copyrightu na slovo fyzik, měl bych největší tendenci přiznat
ho peripatetikovi Stratónovi z Lampsaku. Tento filosof se sám nazval
fyzikem, protože dělal přírodní filosofii bez použití metafyzických
konceptů (jako např. prvotní hybatel).&lt;/p&gt;

&lt;p&gt;Za základní kámen fyziky jako vědního oboru považuji Principia (celým
názvem Phisophiae Naturalis Principia Mathematica) Isaaca Newtona.
Principia zobecňují předchozí pozorování do podoby zákonů, formulovaných
s pomocí matematického aparátu diferenciálního počtu. Provázanost
matematiky a pozorování je pro fyziku charakteristická.&lt;/p&gt;

&lt;p&gt;Už v devatenáctém století bylo možno většinu tehdy známých jevů
vysvětlit pomocí několika málo principů, zákonů. Pokud popis jevu
neobsahuje matematický model a vysvětlení skrze nějaký fundamentální
fyzikální princip, fyzik tento popis pravděpodobně nazve popisem
fenomenologickým, nikoli fyzikálním. Fyzik tedy zkoumá jevy v přírodě a
pouze v přírodě a není spokojen, dokud nemá patřičný matematický model,
který uvede v soulad s co možná nejobecněji aplikovatelnými
matematickými modely.&lt;/p&gt;

&lt;p&gt;Vzhledem k značné specializaci se pak někteří fyzici zabývají čistě výše
zmíněnými modely – pak se jedná o teoretické fyziky. Jiní se zabývají
primárně sběrem a vyhodnocováním dat z experimentů/pozorování – jedná se
o fyziky experimentální.&lt;/p&gt;

&lt;h3 id=&quot;jak-jsem-se-k-fyzice-dostal&quot;&gt;Jak jsem se k fyzice dostal?&lt;/h3&gt;

&lt;p&gt;Jako malý kluk jsem si vybíral budoucí zaměstnání s ohledem na to, jak
být co nejhodnotnější člověk. Protože jsem byl přesvědčen, že než
dospěji, většinu zaměstnání, které tehdy vykonávali lidé, převezmou
roboti, snažil jsem se vybrat oblast činnosti, kde je těžké člověka
nahradit strojem.&lt;/p&gt;

&lt;p&gt;Zastával jsem názor, že stroje nejsou schopny kreativity a originálních
myšlenek. Zároveň jsem nepovažoval umění za správnou cestu, protože jsem
chtěl přispívat spíš ke zvýšení výkonnosti lidstva než k zintenzivnění
jeho prožitků. A jak se změří výkonnost lidské kultury? Tím, že se
poměří s jinou kulturou. A kdy se nejlépe poměřují dvě kultury? Ve
válce. Jistou zkratkou jsem pak dospěl k tomu, že pokud odhlédneme od
různých těžko podchytitelných okolností, vítězí strana s technologickou
nadvládou.&lt;/p&gt;

&lt;p&gt;Poměrně záhy jsem se začal zajímat o zbrojní technologie, např.
stíhačky, které jsem měl potřebu porovnávat na základě různých
fyzikálních parametrů, z nichž mnohé jsem si musel mnohé jiné
dopočítat. Mimoděk jsem se zlepšil v matematice a když jsem v šesté
třídě odvodil vztah pro objem elipsoidu, matikářka mě poslala na
olympiádu z matematiky a dál jsem si jel víceméně podle vlastních
osnov.&lt;/p&gt;

&lt;p&gt;Na gymnáziu jsem se rozhodl, že ke zvýšení bojeschopnosti lidstva
přispěji spíše jako fyzik než jako matematik. Nejenom, že jsem se bál,
že kvůli mamonu bych jako matematik sklouzl k tak opovrženíhodným oborům
jako je ekonomie, a navíc jsem dostal trestuhodně nekompetentní
matikářku. Přesedlal jsem tedy z olympiády matematické na olympiádu
fyzikální, která mě ušetřila přijímacího řízení na Matematicko-fyzikální
fakultu Univerzity Karlovy v Praze, kde jsem strávil celkem deset let
života.&lt;/p&gt;

&lt;p&gt;A jako post scriptum bych rád uvedl, že jsem v podstatě pacifista. :)&lt;/p&gt;

&lt;h3 id=&quot;moje-vědecká-kariéra&quot;&gt;Moje vědecká kariéra&lt;/h3&gt;

&lt;p&gt;S jistou mírou nadsázky lze říci, že mou první vědeckou prací byla už
práce bakalářská, kde jsem se zabýval problémem, jak pojmout zdánlivou
neplatnost zákona zachování energie v systémech, jejichž hmotnost se z
různých důvodů mění. Integrací druhého Newtonova zákona může člověk
poměrně snadno krom kinetické a potenciální energie dostat další člen
spojený se změnou hmotnosti systému. Dodnes mě fascinuje, že tak banální
problém z mechaniky nelze vyřešit pětiminutovým googlením.&lt;/p&gt;

&lt;p&gt;Na magistra jsem šel na teoretickou fyziku. Je to jediný obor v rámci
studia fyziky, který se nemá žádnou experimentální složku. Vybral jsem
si tento směr nejenom kvůli náročnosti, ale také protože jsem chtěl co
nejlépe rozumět základům současného fyzikálního poznání – od kosmologie
po částicovou fyziku. Jako téma výzkumu a magisterské práce jsem si
vybral gravitační čočky, tj. astrofyzikální jev, kdy gravitační pole
ovlivňuje dráhu paprsku podobným způsobem jako optická čočka.&lt;/p&gt;

&lt;p&gt;Černé díry nebo kosmologie by pro mě byla zajímavější, ale toto téma
jsem si vybral hlavně kvůli osobnosti svého vedoucího.&lt;/p&gt;

&lt;p&gt;Efekt gravitační čočky lze využít k mnohým aplikacím od zjasňování
extrémně vzdálených zdrojů (např. nejvzdálenější kupa galaxií MACS
J0416.1 2403), mapování temné hmoty (např. Bullet Cluser) a detekce
vzdálených planet.&lt;/p&gt;

&lt;p&gt;Já sám se zaměřil na planety, nebo spíš na model gravitačních čoček,
který je nejlépe využitelný v tomto režimu. Moje práce teoretika
spočívala v modelování a klasifikaci možných výsledků pozorování pro
složitější planetární systémy.&lt;/p&gt;

&lt;p&gt;Obor obecně trpěl na nedostatek teoretiků, většina zaangažovaných
astrofyziků se zabývala jen pozorováním a fitováním dat bez ambice
výrazně zefektivnit model tak, aby mohl postihnout např. větší množství
těles. Velkou výhodou tohoto zaměření bylo, že jsem pracoval v zatím
nepříliš zmapovaném oboru, měl možnost počítat věci, o kterých jsem měl
jistotu, že je nikdo přede mnou nespočítal a zároveň jsem se těšil zájmu
zájem komunity, protože jsem dělal něco, co znělo zajímavě a zároveň to
budilo respekt, protože tomu nikdo nerozuměl.&lt;/p&gt;

&lt;p&gt;Stinnou stránkou bylo krom značné nepřímočarosti celého problému také
obtížnost spolupráce s astrofyziky, pro které byl můj výzkum příliš
abstraktní.&lt;/p&gt;

&lt;p&gt;Doktorát se završil, s vedoucím jsme protlačili k publikaci dva články,
ve kterých jsou rovnice, které by mohly nést moje jméno. Ale na
univerzitě pro mě nebyla pozice a v zahraničí to nebylo o moc lepší.
Trucovitě jsem nehledal místo v oboru, ale vrhl jsem se na něco o
poznání praktičtějšího než je astrofyzika/teoretická fyzika: výzkum
kovů na Akademii Věd.&lt;/p&gt;

&lt;h3 id=&quot;akademie-věd&quot;&gt;Akademie Věd&lt;/h3&gt;

&lt;p&gt;Práci na Akademii jsem našel nejbanálnějším možným způsobem – přes
inzerát na jobs.cz. Šlo o výzkum moderních materiálů pomocí
elektronových mikroskopů. Ač to nebylo nic tak vznešeného jako studium
vesmíru, možnost využívat znalost mikrostruktury pro několikanásobné
zlepšení mechanických vlastností kovů mi přišla fascinující.&lt;/p&gt;

&lt;p&gt;Hattori Hanzo si může kovat nejlepší katany na světě díky
několikasetleté zkušenosti získané pokus-omylem, ale já můžu díky
výdobytkům vědy jít mnohem dál a mnohem rychleji!&lt;/p&gt;

&lt;p&gt;Transmisní elektronový mikroskop jsem si vybral kvůli prestiži. Ty
nejlevnější nové stojí desítky miliónů korun, ač ojeté stařečky z druhé
ruky výzkumník pořídí řádově levněji. Přiznávám, že přeučit se z
teoretika, který kombinoval C++ s pen &amp;amp; paper výzkumem na
experimentátora ovládajícího přístroj s hromadou analogových prvků bylo
těžké. Měření s transmisním mikroskopem bych, co se obtížnosti týče,
přirovnal k řízení auta. Mít cit ten přístroj naladit, aby produkoval
data na publikovatelné úrovni vyžaduje zhruba roční zkušenost, během
které jsem si málem vytrhal všechny vlasy.&lt;/p&gt;

&lt;p&gt;Po své první konferenci v roli experimentátora jsem byl nadšen. Navrhl
jsem experiment, který zaujal několik vědců, získal jsem kontakty na
spolupráci na případném článku. Když jsem se vrátil, skupina elektronové
mikroskopie byla v rozkladu. Jeden z nepřátel mého šéfa se stal jeho
nadřízený a navrhl restrukturalizaci, která pro nás byla prakticky
likvidační. Dostali jsme se tak do konfliktu s vedením, který jsme
prohráli. Výsledkem byl odchod většiny členů skupiny a plonkové
přístroje, na kterých neměl kdo měřit.&lt;/p&gt;

&lt;p&gt;Tehdy jsem ale ještě na Akademii věd nezanevřel, přešel jsem na
teoretické oddělení. Zde jsem dostal do zaučovací fáze a dál už ne.
Tamější vedoucí oddělení měl opět osobní spory s vedením a byl po pár
měsících mého angažmá vyměněn. To bych ještě snesl, ale na jeho místo
byl dosazen nepříliš kompetentní člověk s malým vědeckým překryvem se
zbytkem týmu. Po předchozí zkušenosti jsem to už vnímal jako sabotáž a
odešel z Akademie do Fragarie.&lt;/p&gt;

&lt;h3 id=&quot;slasti-a-strasti-vědeckého-života&quot;&gt;Slasti a strasti vědeckého života&lt;/h3&gt;

&lt;p&gt;Vědecký život je vznešený. Přirozeně, ne každý změní paradigma svého
oboru, o málokterém vědci se bude psát ve středoškolských učebnicích a
běžná populace vědce neocení tak, jak by ocenila, např. fotbalistu. Co
se týče fanynek, vsadil bych si spíš na popovou hvězdu než na
astrofyzika. Občasné výstřelky výzkumných pracovníků do sdělení
sdělovacích prostředků působí spíše rozpačitě.&lt;/p&gt;

&lt;p&gt;Věda je ale tak rozvětvená, že i člověk, který není génius, dostane
příležitost přijít na úžasné věci. Moje oblíbená motivační myšlenka
byla, že bych nikdy nedokázal posunout poznání lidstva jako např.
Einstein, ale svou celoživotní prací jsem schopen vyprodukovat objevy
srovnatelné s géniovou několikatýdenní prací. Tedy rozdíl v kvantitě,
nikoli v kvalitě! Bohužel takových motivačních myšlenek je třeba
poměrně dost.&lt;/p&gt;

&lt;p&gt;Vědecký život je bohatý. Mnoho vědních směrů v České republice je na
světové úrovni a příslušní výzkumníci tak cestují všude možně po světě.
Já sám se během doktorátu podíval pětkrát do USA. Presentoval jsem
poster v Caltechu (východopobřežní analogie MIT). Čtyři měsíce jsem
pracoval na Universitě v St Andrews. Poznal jsem tak mnoho zajímavých
míst a lidí. Paradoxně, většina vědeckých grantů obsahuje podivné
restrikce a třeba poměr peněz, které lze utratit na mzdy a které lze
utratit na cestování nutí vědce cestovat a presentovat své výsledky po
celém světě i v případě, že chtějí klid na svůj výzkum.&lt;/p&gt;

&lt;p&gt;Vědecký život je svobodný. Vědci mají poměrně velkou volnost v tom, co
přesně budou zkoumat. V dobře fungující vědecké instituci nadřízení
výzkumníci sice udávají směr ale jen málo diktují, co má konkrétní
pracovník dělat. I vědci následují módní vlivy ve výzkumu a jejich
výzkumný záměr podléhá i tomu, na co mohou reálně dostat peníze.
Málokdy se stává, že by vědec musel dělat práci, která mu nedává smysl.
Výzkum je práce kreativní a vyžaduje originální myšlenky, svoboda
myšlení tak není jen benefit této práce, ale nutnost.&lt;/p&gt;

&lt;p&gt;Vědecký život je vyčerpávající. Podobně jako všichni akademici, musí se
i vědci hodně snažit, aby ustáli konkurenci. V předchozích bodech
uvedená pozitivní motivace a iracionální obavy výzkumníků z komerční
sféry (hodně akademiků svým způsobem nikdy nezačalo pracovat -
setrváváním v akademické sféře zůstávají na škole) vedou k extrémnímu
přetlaku. Na málo míst je prostě hodně lidí. Tlak na výkonnost a
neschopnost udělat čáru mezi osobním životem a prací u vědců nakonec
vede k absurdním hodinám přesčasů. Konferenční příspěvky a články, které
se připravují o víkendech, hlášky typu “doma toho stejně udělám víc”
jsou běžné. Stejně tak dlouho do noci rozsvícená světla kanceláří.&lt;/p&gt;

&lt;p&gt;V oboru materiálové fyziky je překvapivě časté, že laboratoře vedou
manželské páry, jedním takovým byli moji nadřízení na Akademii, před
nimi vedl laboratoř jiný pár a s podobným modelem jsem se setkal i na TU
v Bratislavě. Nezřídka se původní manželství rozpadnou, aby daly prostor
na práci orientovaným svazkům. Práce si prostě vyžaduje tolik času, že
by partneři nemohli být jinak spolu. Mezi vědci je také možno potkat
mnoho lidí, co neumí odpočívat a poměrně málo spí. Krví podlité váčky
pod očima mého vedoucího se mi staly symbolem únavy, kterou ve svém
životě nechci. Subjektivně může být tato přepracovanost vědcem vnímána
euforicky, já sám jsem měl jistou zvrácenou radost, když jsem byl
motivovaný “zničit se prací”, o dlouhodobých dopadech podobné mánie na
lidskou duši lze spekulovat.&lt;/p&gt;

&lt;p&gt;Vědecký život je ztížen malichernostmi. Občas mě zarazí, když někdo
považuje vědeckou řeholi za aktivitu motivovanou primárně službou
společnosti. Krom radosti ze samotného výkonu mě vždycky motivovalo
spíše přerostlé ego a touha být v něčem dobrý, být lepší než ostatní.
Kombinace obsese zkoumaným problémem a nezdravého sebevědomí často
přemůže zdravý rozum i slušnost.&lt;/p&gt;

&lt;p&gt;Vědecký život je financován státem. Podobně jako jiné obory v ČR z toho
důvodu strádá. Standardní plat post-doktoranda se pohybuje kolem 26 000
Kč hrubého, což není tak hrozné, ale pořád poněkud nedůstojné vzhledem k
tomu, že tato pozice vyžaduje devět let studia. Navíc, je těžké s
takovým platem živit rodinu v Praze. Vědci často fungují díky bohatství
rodičů nebo díky bonitnějšímu partnerovi. Ano, existuje financování
skrze granty. To ale problém příliš neřeší. Díky grantům pozice vůbec
vznikají, tedy nejedná se o přilepšení k výše uvedené mzdě.&lt;/p&gt;

&lt;p&gt;Na Fyzikálním Ústavu AVČR je také zvykem odebrat institucionální část
mzdy a nahradit ji penězi z grantu, tedy plat zůstává stejný, ať už
grant dostanete nebo nikoli. Granty představují přirozeně nemalou
administrativní zátěž. Pro zlepšení příjmů je často přibrat další
úvazek, např. na univerzitě. Nepopírám, že jsou týmy, kde platy nejsou
problém, často díky grantům z EU, ale zároveň mimo fyziku existují vědní
obory, kde je situace ještě horší.&lt;/p&gt;

&lt;p&gt;Vědecký život je nejistý. Velká část vědců je plně placená z grantů.
Grantové projekty trvají nejčastěji 2-5 let, pokud pak projekt nedostane
další peníze, pozice zaniká. To by nebyl takový problém, kdyby tyto
pozice nevyžadovaly extrémní specializaci, která je poněkud neužitečná v
jiném oboru. Pokud máte dobrou sérii grantových projektů a pak výpadek,
může se vám stát, že jste světový odborník např. na akreční disky, ale v
ČR pro vás není pozice. To není dobré, když plánujete hypotéku a není to
dobré, když vám táhne na 40.&lt;/p&gt;

&lt;p&gt;Na „západě“ v kariéře vědce po PhD následuje série post-doktorandských
pozic, kdy cestujete průměrně každé tři roky na jiné místo na planetě a
doufáte, že dostanete stálejší úvazek, který vede k smlouvě na dobu
neurčitou (tzv. tenure-track position). Měl jsem tu čest poznat
astrofyzika, který ve svých 50-ti letech pořád nemohl sehnat stálou
pozici a fungoval v Británii za peníze od katarského šejka. V ČR jsou
pozice trochu stálejší, ale nedobře placené. Nejlepší strategií se tak
zdá vyjet za hranice, našetřit a dožít v domovině s průměrnou mzdou –
nebo se na to prostě vykašlat.&lt;/p&gt;

&lt;h3 id=&quot;slovo-závěrem&quot;&gt;Slovo závěrem&lt;/h3&gt;

&lt;p&gt;Bádání je skvělá činnost, avšak jako zdroj obživy velmi náročná.
Nestěžuje ji ani tak obsah práce samotné, jako spíš nastavení systému
a platové ohodnocení. Já se rozhodl se vědecké kariéry vzdát a
zjednodušit a zpříjemnit si život.&lt;/p&gt;

&lt;p&gt;Práce ve Fragarii tyto kritéria splňuje nad očekávání. Proto bych
formuloval vzkaz svým vědeckým kolegům: Pokud vám leží v žaludku
zamítnutá grantová žádost nebo jiné příkoří a baví vás programovat,
možná je čas do Fragarie napsat.&lt;/p&gt;</content><author><name>Kamil</name></author><category term="fyzika" /><category term="angularjs" /><category term="vědec" /><summary type="html">V tomto textu bych se rád ohlédnul za svou vědeckou kariérou i důvody, proč jsem od ní nakonec upustil a vrhl se na programování.</summary></entry><entry><title type="html">Fraga akce aneb kluci na výletě</title><link href="https://fragaria.cz/website/blog/2017/09/22/fraga-akce-aneb-kluci-na-vylete/" rel="alternate" type="text/html" title="Fraga akce aneb kluci na výletě" /><published>2017-09-22T10:47:00+00:00</published><updated>2017-09-22T10:47:00+00:00</updated><id>https://fragaria.cz/website/blog/2017/09/22/fraga-akce-aneb-kluci-na-vylete</id><content type="html" xml:base="https://fragaria.cz/website/blog/2017/09/22/fraga-akce-aneb-kluci-na-vylete/">&lt;p&gt;Máme za sebou letošní Fraga akci. Jsem ve firmě nováček a tři dny s mými
novými kolegy mi ukázaly kvality tohoto týmu:&lt;/p&gt;

&lt;p&gt;1) Umíme se i bavit a jsme vynalézaví. Umíme zpívat a hrát písničky, k čemu nám
stačí ukulele, celofán, lžíce, kamení a kelímek.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2017-09-22-fraga-akce-aneb-kluci-na-vylete__1.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;2) Umíme věci dobře naplánovat, díky čemuž jsme stihli všechno co bylo naplánované.&lt;/p&gt;

&lt;p&gt;3) Umíme improvizovat tam, kde plán chybí. Tady by byl výčet poněkud dlouhý.&lt;/p&gt;

&lt;p&gt;4) Umíme lidi přemluvit, kupříkladu aby nám načepovali 14 piv, i když mají ještě 3 hodiny zavřenou hospodu.&lt;/p&gt;

&lt;p&gt;5) Umíme lidi motivovat: “Kdo vyhraje, dostane odměnu. Že jakou? To uvidíš až vyhraješ.”&lt;/p&gt;

&lt;p&gt;6) Jsme soudržní, nedělíme se na víc než dvě skupiny.&lt;/p&gt;

&lt;p&gt;7) Umíme najít kompromis: “Jděte pěšky, my jedeme busem. Sejdeme se na ubikaci.”&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2017-09-22-fraga-akce-aneb-kluci-na-vylete__2.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;8) Umíme dobře argumentovat: “Nepůjdeme přeci po asfaltce, to je nuda!”&lt;/p&gt;

&lt;p&gt;9) Jsme tým a umíme si podat pomocnou ruku, např. abychom pomohli kolegovi překonat potok suchou nohou po větvi stojíc po kotníky ve vodě.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2017-09-22-fraga-akce-aneb-kluci-na-vylete__3.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;10) Máme pohotové reakce, dokážeme uskočit běžící srně z cesty.&lt;/p&gt;

&lt;p&gt;11) Dokážeme si přiznat chybu: “To nejsou krávy, to jsou býci. Utíkejme!” &lt;/p&gt;

&lt;p&gt;12) Jsme dobrými pozorovateli, jsme schopní objevit i živočichy s dobrým krytím jako je skokan, kterému z louže čouhají jenom oči.&lt;/p&gt;

&lt;p&gt;13) Máme mnoho společných témat, a to nejen z našeho oboru, ale od barefoot bot až po kvantovku.&lt;/p&gt;

&lt;p&gt;14) Nebojíme se seznámit, abychom si rozšíříli obzory. Narozeninová oslava ve vedlejší místnosti může být dobrou příležitostí se seznámit s mnoha různými lidmi na jednom místě.&lt;/p&gt;

&lt;p&gt;15) Učíme se nové jazyky, třeba i ten posunkový.&lt;/p&gt;

&lt;p&gt;16) Kolegové mají slušné vychování a vědí, že dámy mají přednost. Když však dáma zahučí do bahna, tak ji pomůžou z něj ven a sami ho pak obejdou.&lt;/p&gt;

&lt;p&gt;17) Jsme dobrými architekty, umíme naskládat dříví pro opravdu krásný oheň.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2017-09-22-fraga-akce-aneb-kluci-na-vylete__4.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;18) Jsme hraví, baví nás bowling i logik.&lt;/p&gt;

&lt;p&gt;Tohle všechno a ještě víc se odehrálo ve třech dnech od čtvrtku
odpoledne, kdy jsem se vlakem vybrali do Českých Budějovic, do neděle
oběda, kdy jsme se živí a zdraví vrátili zpátky do
Prahy. &lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2017-09-22-fraga-akce-aneb-kluci-na-vylete__5.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;Ano, zdraví. Tento rok se akce obešla bez zranění. Bodnutí včelou
nebudeme specifikovat jako zranění, ani když se jedná o bodnutí v dutině
ústní.&lt;/p&gt;

&lt;p&gt;Ubytování, pivo, jídlo, bowling, saunu a krásné ohniště s posezením nám
poskytl pivovar s penzionem v Nových Dvorech.&lt;/p&gt;

&lt;p&gt;Večery jsme trávili společně debatami, zpěvem, opékáním a posilováním
zdraví dostatečným příjmem tekutin s obsahem komplexu vitamínů skupiny
B.&lt;/p&gt;

&lt;p&gt;V pátek jsme se vybrali na vycházku malebnou krajinou kolem rybníků do
sousední obce. Byl čas oběda, tak jsme hledali místo, kde bychom se
mohli najíst a doplnit těkutiny. Potěšil nás hospodský, který nám
natočil pivo a naservíroval utopence tři hodiny před vlastní
otvíračkou.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2017-09-22-fraga-akce-aneb-kluci-na-vylete__6.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;Po poklidné procházce to chtělo trochu adrenalinu. Rozdělili jsme se na
dvě skupinky a vydali se ho pohledat. Část se vydala přírodou, část
autobusem do města. V přírodě jsme narazili na překážky, které ukázaly
soudržnost týmu a ochotu pomoci kolegovi. A taky jsme se přesvědčili, že
za divokou přírodou nemusíme na safari. Kluci ve městě se vydali hledat
adrenalin na sídliště Máj. Svoji misi si zpříjemnili plněním svých
přání. &lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2017-09-22-fraga-akce-aneb-kluci-na-vylete__7.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;V sobotu jsme se vydali do nedaleké Hluboké. Pěší cestu opět vystihuje
motto “Cesta je cíl”, i třetí den po sobě jsme si pořád měli o čem
povídat. U ZOO jsme si dali obídek a oslavili Robinovo narozeniny. Na
námestí jsme si v pivovaru u pivka procvičili mozkové buňky Logikem a
Scrabblem. &lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2017-09-22-fraga-akce-aneb-kluci-na-vylete__8.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;p&gt;Bylo to uvolněné a oddychové setkání party fajn kluků a, poprvé v
historii, holek.&lt;/p&gt;</content><author><name>Daniela Borošová</name></author><category term="kancl" /><category term="fragaria" /><summary type="html">Máme za sebou letošní Fraga akci. Jsem ve firmě nováček a tři dny s mými novými kolegy mi ukázaly kvality tohoto týmu:</summary></entry><entry><title type="html">Jahoda, malina, sloni, hadi, flanděra, angular</title><link href="https://fragaria.cz/website/blog/2017/07/03/jahoda-malina-sloni-hadi-flandera/" rel="alternate" type="text/html" title="Jahoda, malina, sloni, hadi, flanděra, angular" /><published>2017-07-03T10:56:00+00:00</published><updated>2017-07-03T10:56:00+00:00</updated><id>https://fragaria.cz/website/blog/2017/07/03/jahoda-malina-sloni-hadi-flandera</id><content type="html" xml:base="https://fragaria.cz/website/blog/2017/07/03/jahoda-malina-sloni-hadi-flandera/">&lt;p&gt;Přijde takhle klient do kanceláře a povídá: “Máme tady takovou velkou
mašinu a k ní si můžeme koupit příšerně drahý ovládací panel. Nesvedli
byste pro nás udělat něco levnějšího?” Technicky zdatný ředitel
společnosti nesměle dí: “To bychom asi svedli.” Klientovi se rozzáří
očka a tichým hlasem dodá: “Ale potřebovali bychom, aby to fungovalo ve
skoro reálném čase a máme tu na to nějaká volná Raspberry Pi.”&lt;/p&gt;

&lt;p&gt;Kromě výkonnosti Raspberry jsme také podle zadání docela omezeni v
technologickém rozletu: nějaký ten webový frontend, kde se budou data
ukazovat a bude je možné měnit, backend ideálně v Pythonu a jako datové
úložiště bychom rádi použili třeba SQLite. Naše vyprávění ale začneme
od uživatelského konce, tedy od
klienta.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2017-07-03-jahoda-malina-sloni-hadi-flandera__1.jpg&quot; /&gt;

&lt;/figure&gt;

&lt;h2 id=&quot;angular-websockets-a-socketio&quot;&gt;Angular, WebSockets a socket.io&lt;/h2&gt;

&lt;p&gt;Protože ve Fragarii válíme poslední dobou hlavně v Angularu, tak jsme
použili jeho čtvrtou, poslední verzi a místo tradičního pollingu se jako
komunikační protokol přímo nabízí
&lt;a href=&quot;https://en.wikipedia.org/wiki/WebSocket&quot;&gt;WebSockets&lt;/a&gt;. Kdo by neznal,
představí si otevřený tunel mezi prohlížečem a serverem, kudy
obousměrně tečou data. Oproti tradičnímu HTTP, zásadním způsobem
eliminujeme režii spojenou s každým novým požadavkem a tím zvyšujeme
výkon celé aplikace.&lt;/p&gt;

&lt;p&gt;Jenže! Jak se později ukázalo, v Pythonu je jednodušší použít knihovnu
&lt;a href=&quot;https://socket.io/&quot;&gt;socket.io&lt;/a&gt;, která umí kromě WebSocketů spousta
dalších parádních věcí - zejména se tvářit jako WebSockets i tam, kde
tahle technologie nefunguje a taky jednotlivým datovým zprávám
přiřazovat pojmenovaný typ.&lt;/p&gt;

&lt;p&gt;Takže si v Angularu podobně jako v &lt;a href=&quot;https://www.npmjs.com/package/ng2-socket-io&quot;&gt;tomhle
návodu&lt;/a&gt; napíšeme tupoučký
wrapper a službičku…&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// .. omit some imports&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;Injectable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;WebSocketService&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sockets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;WrappedSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{};&lt;/span&gt;

    &lt;span class=&quot;kr&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;WrappedSocket&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sockets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sockets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;WrappedSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sockets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// omit import, basically taken from ng2-socket-io&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;io&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'socket.io-client'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;Injectable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;WrappedSocket&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;SocketIoConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;any&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{};&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;io&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;disconnect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'disconnect'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;disconnect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;arguments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;emit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;emit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;arguments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;removeListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;removeListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;arguments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;removeAllListeners&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;removeAllListeners&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;arguments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** create an Observable from an event */&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;fromEvent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Observable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;subscribersCounter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Observable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
             &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                 &lt;span class=&quot;nx&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
             &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                 &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;subscribersCounter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ioSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;removeListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;share&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;…a na dalších 20 řádkách si ten tunel ještě pustíme. No, a to je
vlastně všechno. Zbytek aplikace jsou tradiční nezajímavé formulářové
inputy, validace a taky on-screen klávesnice. Třeba trochu upravená
&lt;a href=&quot;https://github.com/protacon/ng-virtual-keyboard&quot;&gt;tahleta&lt;/a&gt;.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// omit imports&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt;   &lt;span class=&quot;nx&quot;&gt;SOCKET_URL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/* @echo SOCKET_URL */'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;Component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'dashboard.component.html'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;styleUrls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'dashboard.component.less'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Dashboard&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;OnInit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;OnDestroy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;kr&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mainSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;WrappedSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;socketSubscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;fields&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{};&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;constructor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;kr&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;socketService&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;WebSocketService&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mainSocket&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;socketService&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;SOCKET_URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;ngOnInit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Listen for &quot;data_changed&quot; events from server&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;socketSubscribe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mainSocket&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fromEvent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'data_changed'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                    &lt;span class=&quot;nx&quot;&gt;field&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;field&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;modify&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;field&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;modify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// Handle data change from UI and emit &quot;json&quot; event into socket&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;onFieldChange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mainSocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;emit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'json'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;na&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;ngOnDestroy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;socketSubscribe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;socketSubscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;unsubscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;flask-a-socketio&quot;&gt;Flask a socket.io&lt;/h2&gt;

&lt;p&gt;Webových frameworků v Pythonu jsou samozřejmě tuny. Pojďme ale použít
něco jednoduchého, do čeho se dobře integruje socket.io. Volba padla na
&lt;a href=&quot;http://flask.pocoo.org/&quot;&gt;Flask&lt;/a&gt;, pár lidí ho
&lt;a href=&quot;https://hotframeworks.com/languages/python&quot;&gt;používá&lt;/a&gt; a socket.io to
&lt;a href=&quot;https://flask-socketio.readthedocs.io/en/latest/&quot;&gt;taky umí&lt;/a&gt;. Přijímat
data z klienta je pak přímo odzbrojujícím způsobem jednoduché.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;flask&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Flask&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;flask_socketio&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SocketIO&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;flask_cors&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CORS&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Flask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;from_envvar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'FLASKR_SETTINGS'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;silent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;CORS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;socketio&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SocketIO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Handles messages of type &quot;json&quot;&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@socketio.on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'json'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;client_data_change&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;database&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;update_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'data'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'data'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'value'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Jak se data na klienta posílají si ukážeme po krátké odbočce do světa
databází.&lt;/p&gt;

&lt;h2 id=&quot;sqlite-postgresql-a-listennotify&quot;&gt;SqLite, PostgreSQL a LISTEN/NOTIFY&lt;/h2&gt;

&lt;p&gt;Když už se pollingem, tedy periodickou kontrolou dat nezabýváme na ose
prohlížeč-server, byla by škoda dělat polling do databáze. Na scénu tak
vstupují SQLite a PostgreSQL, které umí pomocí
&lt;a href=&quot;https://www.sqlite.org/c3ref/update_hook.html&quot;&gt;update_hook&lt;/a&gt; respektive
dvojice
&lt;a href=&quot;https://www.postgresql.org/docs/9.4/static/sql-listen.html&quot;&gt;LISTEN&lt;/a&gt;/&lt;a href=&quot;https://www.postgresql.org/docs/9.4/static/sql-notify.html&quot;&gt;NOTIFY&lt;/a&gt; při
nějaké události volat uživatelský kód. Pro SQLite se dá použít například
knihovna &lt;a href=&quot;https://github.com/karellen/karellen-sqlite&quot;&gt;karellen-sqlite&lt;/a&gt;,
my si ukážeme, jak se problém řeší v Postgresu a
&lt;a href=&quot;http://initd.org/psycopg/&quot;&gt;psycopg2&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;V PostgreSQL mějme jednoduchou tabulku, z níž chceme zavolat NOTIFY
pokaždé, když do ní přibude nový řádek. Na to se samozřejme nejlépe
používají triggery.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;c1&quot;&gt;-- simple table definition, sequence omitted&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;field_value&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;integer&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;character&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;varying&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;character&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;varying&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FUNCTION&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;field_value_notify_change&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;RETURNS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;trigger&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;LANGUAGE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plpgsql&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;$$&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;DECLARE&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jsonb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;-- build JSON object, compatible with 9.4 and 9.5&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json_build_object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'field'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NEW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'value'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NEW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;-- this is the magic, that emits the real event&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;perform&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pg_notify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'field_value_change'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;RETURN&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;END&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;$$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;-- regsiter function as a table trigger&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TRIGGER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;on_field_value_change&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AFTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;field_value&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FOR&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;EACH&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ROW&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;EXECUTE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PROCEDURE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;field_value_notify_change&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Obsluha v Pythonu je pak dost jednoduchá, ale pro webový server je
blokující smyčka tak, jak je uvedená v dokumentaci, poměrně nevhodná.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;# http://initd.org/psycopg/docs/advanced.html#asynchronous-notifications&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;select&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;psycopg2&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;psycopg2.extensions&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;psycopg2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DSN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_isolation_level&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;psycopg2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extensions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ISOLATION_LEVEL_AUTOCOMMIT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;curs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;LISTEN field_value_change&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Waiting for notifications on channel 'test'&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],[],[],&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([],[],[]):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Timeout&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;poll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;notifies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;notify&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;notifies&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Got NOTIFY:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notify&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notify&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;channel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notify&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;lepíme-to-celé-dohromady&quot;&gt;Lepíme to celé dohromady&lt;/h2&gt;

&lt;p&gt;Naštěstí máme
&lt;a href=&quot;https://flask-socketio.readthedocs.io/en/latest/&quot;&gt;flask-socketio&lt;/a&gt; a v
něm zprovozněný &lt;a href=&quot;http://eventlet.net/&quot;&gt;eventlet&lt;/a&gt;, takže se té blokující
smyčky můžeme elegantně zbavit. Použijeme na to dva background tasky (v
podstatě samostatná vlákna) v režii socket.io a asynchronní frontu s
&lt;a href=&quot;http://eventlet.net/doc/hubs.html?highlight=trampoline#eventlet.hubs.trampoline&quot;&gt;trampolínou&lt;/a&gt;
z arzenálu knihovny eventlet. Celá nádhera tak vypadá následovně:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;eventlet.hubs&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trampoline&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;start_listening&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;Connects to PgSQL and listens to notifications, inspired by http://initd.org/psycopg/articles/2010/12/01/postgresql-notifications-psycopg2-eventlet/&quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;connection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;psycopg2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DSN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;LISTEN field_value_change&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;trampoline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;poll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;notifies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;notify&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;notifies&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;notify&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;emitter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;Listens to queued events and emits data_changed broadcast event to a socket&quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;element&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;socketio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;emit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'data_changed'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'data'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'field'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'value'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'value'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]}},&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;broadcast&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# ...&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;dbThread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;qThread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@socketio.on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'connect'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;On first socket.io connection registers the database listener and value emitter&quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dbThread&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qThread&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eventlet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dbThread&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dbThread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;socketio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_background_task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_listening&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;qThread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;socketio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_background_task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;emitter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Neumíte si to představit? Podívejte se na následující video, kde je
navíc v provozu i REST API, aby se nemuselo sahat přímo do databáze:&lt;/p&gt;

&lt;iframe width=&quot;640&quot; height=&quot;360&quot; src=&quot;https://www.youtube.com/embed/y8cdWyMp_KE&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;co-říci-závěrem&quot;&gt;Co říci závěrem&lt;/h2&gt;

&lt;p&gt;Díky menší zoologické zahradě existujících technologií a knihoven jsme
takhle byli schopní během pár dnů dodat firmě na balicí stroje pilotní
ukázku toho, jak by mohl vypadat reálný řídící panel s různými
komponentami. Angular nám pomohl k tomu, že řešení je modulární a z
jednotlivých komponent se dají skládat různé obrazovky. Dostatečně
obecné řešení backendu pomocí PostgreSQL a WebSockets pak umožňuje
snadnou rozšiřitelnost a přizpůsobování podle toho, jaké typy dat
potřebují jednotlivé stroje.&lt;/p&gt;

&lt;p&gt;Když už frčí to reaktivní programování na frontendu, tímhle relativně
jednoduchým způsobem můžete postavit reaktivní celou aplikaci odshora
dolů. To samozřejmě šetří zdroje, možná to zlepšuje uživatelský
prožitek, ale hlavně to setsakra dobře vypadá.&lt;/p&gt;</content><author><name>Jirka Chadima</name></author><category term="sqlite" /><category term="javascript" /><category term="python" /><category term="flask" /><category term="angularjs" /><category term="socket.io" /><category term="eventlet" /><category term="postgresql" /><category term="raspberry" /><summary type="html">Přijde takhle klient do kanceláře a povídá: “Máme tady takovou velkou mašinu a k ní si můžeme koupit příšerně drahý ovládací panel. Nesvedli byste pro nás udělat něco levnějšího?” Technicky zdatný ředitel společnosti nesměle dí: “To bychom asi svedli.” Klientovi se rozzáří očka a tichým hlasem dodá: “Ale potřebovali bychom, aby to fungovalo ve skoro reálném čase a máme tu na to nějaká volná Raspberry Pi.”</summary></entry><entry><title type="html">NPM packages 101: Creating npm package</title><link href="https://fragaria.cz/website/blog/2017/06/26/npm-packages-101-creating-npm-package/" rel="alternate" type="text/html" title="NPM packages 101: Creating npm package" /><published>2017-06-26T09:52:00+00:00</published><updated>2017-06-26T09:52:00+00:00</updated><id>https://fragaria.cz/website/blog/2017/06/26/npm-packages-101-creating-npm-package</id><content type="html" xml:base="https://fragaria.cz/website/blog/2017/06/26/npm-packages-101-creating-npm-package/">&lt;p&gt;Going down the path of node package creator - guide to create npm
package and publish it to npm
repository.&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto,dpr_2.0/fragaria.cz/posts/2017-06-26-npm-packages-101-creating-npm-package__1.jpg&quot; /&gt;
&lt;figcaption&gt;Tim Gouw&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;As I couldn’t find any Javascript package for handling &lt;a href=&quot;https://en.wikipedia.org/wiki/National_identification_number#Czech_Republic_and_Slovakia&quot;&gt;Czech and Slovak
National identification
number&lt;/a&gt;,
aka &lt;em&gt;rodné číslo&lt;/em&gt;, I’ve decided to publish my own. As this was my first
time going down the path of npm package maintainer, I’d like to share
how it feels these days.&lt;/p&gt;

&lt;h2 id=&quot;nvm-to-the-rescue&quot;&gt;NVM to the rescue&lt;/h2&gt;

&lt;p&gt;Before diving into the package creation I’d like to recommend
&lt;a href=&quot;https://github.com/creationix/nvm&quot;&gt;nvm&lt;/a&gt;, a tool for managing separate
node versions/environments on your local computer. I especially like it
for storing my global npm packages like &lt;a href=&quot;http://yeoman.io/&quot;&gt;yeoman&lt;/a&gt; or
even npm itself under &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.nvm/...&lt;/code&gt; directories and not under
&lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/lib/node_modules&lt;/code&gt; which I like to keep simple and
su-rights-protected.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;c&quot;&gt;# install nvm&lt;/span&gt;
nvm &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;node
nvm use node&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Ok, nvm is installed let’s dive into package creation.&lt;/p&gt;

&lt;h2 id=&quot;creating-package-from-scratch-no-yo&quot;&gt;Creating package from scratch? No. Yo!&lt;/h2&gt;

&lt;p&gt;Shall I use ES5? ES6? ES7? Babel? Coffeescript? Typescript? How to
configure them?
What version of compiler? Why the heck are we compiling Javascript
anyway?
Shall I use &lt;code class=&quot;highlighter-rouge&quot;&gt;import&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;require&lt;/code&gt;?
And what’s this badge &lt;img src=&quot;https://img.shields.io/travis/kub1x/rodnecislo.svg&quot; alt=&quot;generator-np build
status&quot; /&gt;?
Automated building? Cool, how do I configure it?
And how about test framework? And mocks?!
Wait and what license should i choose?!&lt;/p&gt;

&lt;p&gt;You got it. Creating a npm package is a process of overwhelming amount
of decisions. Decisions someone else must’ve already undertaken. And
luckily some of them shared their effort in a form of &lt;a href=&quot;http://yeoman.io/generators/&quot;&gt;yeoman
generator&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;so-lets-generate-the-package&quot;&gt;So let’s generate the package&lt;/h2&gt;

&lt;p&gt;At the time of starting my package the
&lt;a href=&quot;https://github.com/d4rkr00t/generator-np&quot;&gt;generator-np&lt;/a&gt; seemed
promising, though it is a bit out of date today: &lt;img src=&quot;https://img.shields.io/github/issues/d4rkr00t/generator-np.svg&quot; alt=&quot;generator-np
issues&quot; /&gt;.
It solved most of the questions above for me. As written in the
description of the generator:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Generator for npm module with ES6+,
&lt;a href=&quot;https://github.com/babel/babel&quot;&gt;Babel&lt;/a&gt;,
&lt;a href=&quot;https://github.com/sindresorhus/ava&quot;&gt;Ava&lt;/a&gt;,
&lt;a href=&quot;https://github.com/eslint/eslint&quot;&gt;ESlint&lt;/a&gt;,
&lt;a href=&quot;https://travis-ci.org/&quot;&gt;Travis&lt;/a&gt;, and npm scripts&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;So we’ll write ES6 javascript, babel compilled, ava tested and use
travis for CI.
Now let’s have an empty github repo
&lt;a href=&quot;https://github.com/kub1x/rodnecislo&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kub1x/rodnecislo&lt;/code&gt;&lt;/a&gt; cloned in
&lt;code class=&quot;highlighter-rouge&quot;&gt;rodnecislo&lt;/code&gt; directory and start the generator as follows:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;git clone git@github.com:kub1x/rodnecislo.git
&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;rodnecislo
nvm use node
npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; yeoman generator-np
yo np&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The generator-np still asks some questions, which need to be answered.
Following are my answers and the reasoning behind them.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;What is the URL of your
website?&lt;/strong&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;https://kub1x.github.io/rodnecislo/&lt;/code&gt;
Go to &lt;a href=&quot;https://pages.github.com/&quot;&gt;github pages&lt;/a&gt;, scroll under the video
tutorial, click “Project page” and follow the instructions. Your url
will have this form:
&lt;code class=&quot;highlighter-rouge&quot;&gt;https://your_user_name.github.io/your_repo_name/&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Do you need .travis.yml?&lt;/strong&gt;&lt;em&gt;Yes.&lt;/em&gt;
Got to &lt;a href=&quot;https://travis-ci.org/&quot;&gt;Travis-ci&lt;/a&gt;. Create an account. Enable
for your github repository. Get emails whenever you push to master
something, that breaks your build, lint or tests.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Do you need setup for coveralls?&lt;/strong&gt;&lt;em&gt;Yes.&lt;/em&gt;
You don’t need to do anything (except writing your tests…) to see
beautiful visualisation of your test coverage on your &lt;a href=&quot;https://coveralls.io/github/kub1x/rodnecislo&quot;&gt;coveralls
page&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Do you need setup for commitizen?&lt;/strong&gt;&lt;em&gt;Yes.&lt;/em&gt;
It feels really neat to have standardized format of commit messages.
Better for cooperation, readability, confidence, automated tools…
simply better. Using commitizen you basically do &lt;code class=&quot;highlighter-rouge&quot;&gt;git cz&lt;/code&gt; and follow a
short wizard instead of doing &lt;code class=&quot;highlighter-rouge&quot;&gt;git commit -m “some messy message”&lt;/code&gt;. The
resulting message looks like this: &lt;code class=&quot;highlighter-rouge&quot;&gt;build(travis): Add node version 7 to
.travis.yml&lt;/code&gt;.
See &lt;a href=&quot;http://commitizen.github.io/cz-cli/&quot;&gt;commitizen page&lt;/a&gt; on how the
system actually works. It defaults to angular commit standard, that is
&lt;a href=&quot;https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#-git-commit-guidelines&quot;&gt;described
here&lt;/a&gt;.
Tough I find it much more helpful to get the notion from the actual
commit messages in the &lt;a href=&quot;https://github.com/angular/angular.js/commits/master&quot;&gt;angular
repo&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Do you need automatic github releases?&lt;/strong&gt;&lt;em&gt;Yes.&lt;/em&gt;
This gives us a great benefit of &lt;a href=&quot;https://github.com/kub1x/rodnecislo/releases&quot;&gt;generated
releases&lt;/a&gt;. The tool for
it, &lt;code class=&quot;highlighter-rouge&quot;&gt;conventional-github-releaser&lt;/code&gt;, tells you exactly what to do to,
which itself helps so much, that I can’t resist repeating it here (just
a little more specific).
Going from version &lt;code class=&quot;highlighter-rouge&quot;&gt;0.0.1&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;0.0.2&lt;/code&gt;:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Make a change&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;npm run verify&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;git cz&lt;/code&gt; the change&lt;/li&gt;
  &lt;li&gt;Make sure Travis CI turns green&lt;/li&gt;
  &lt;li&gt;Repeat until enough changes to call it a version ;P&lt;/li&gt;
  &lt;li&gt;Do &lt;code class=&quot;highlighter-rouge&quot;&gt;npm login&lt;/code&gt; with your npmjs.org account. I failed to do this and
accidentally published my package as a wrong user ;)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;npm run major&lt;/code&gt; OR &lt;code class=&quot;highlighter-rouge&quot;&gt;minor&lt;/code&gt; OR &lt;code class=&quot;highlighter-rouge&quot;&gt;patch&lt;/code&gt; - does all the following for
you:
    &lt;ul&gt;
      &lt;li&gt;Run tests, verifications, etc.&lt;/li&gt;
      &lt;li&gt;Bump version in package.json, commit, create git tag and push it&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;npm publish&lt;/code&gt; to &lt;a href=&quot;https://www.npmjs.com/package/rodnecislo&quot;&gt;npmjs
repo&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;npm run github-release&lt;/code&gt; - creates the nice release report on github
mentioned earlier&lt;/li&gt;
  &lt;li&gt;Celebrate… and maintain.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;Do you need CLI?&lt;/strong&gt;&lt;em&gt;No.&lt;/em&gt;
As I’m writing npm library rather than console tool, I don’t expect it
being used from command line. But for the sake of completeness the &lt;code class=&quot;highlighter-rouge&quot;&gt;cli&lt;/code&gt;
option of the generator creates &lt;a href=&quot;https://github.com/d4rkr00t/generator-np/blob/master/app/templates/src/cli.js&quot;&gt;this
file&lt;/a&gt;
in your package’s &lt;code class=&quot;highlighter-rouge&quot;&gt;src&lt;/code&gt; directory and adds &lt;code class=&quot;highlighter-rouge&quot;&gt;meow&lt;/code&gt; to your deps. That’s
it.&lt;/p&gt;

&lt;h2 id=&quot;aaaand-were-done-almost&quot;&gt;Aaaand we’re done… Almost&lt;/h2&gt;

&lt;p&gt;After the generation process finishes the whole project is automatically
being set up. The template itself takes care of &lt;code class=&quot;highlighter-rouge&quot;&gt;npm install&lt;/code&gt;, running
your first build, lint, tests, and checking for outdated dependencies
using &lt;a href=&quot;https://docs.npmjs.com/cli/outdated&quot;&gt;npm outdated&lt;/a&gt;. I recommend
reading the output of the generation process as there is practically
everything you need to know about your newly generated package,
especially the npm scripts being called.
At the time of writing, some of the packages are outdated downright
after the generation due to &lt;a href=&quot;https://github.com/d4rkr00t/generator-np/pulls&quot;&gt;inactivity of the
maintainer&lt;/a&gt; (perhaps
someone could offer him a hand ;)). To fix this use
&lt;a href=&quot;https://www.npmjs.com/package/npm-check-updates&quot;&gt;npm-check-updates&lt;/a&gt;
tool:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; npm-check-updates
ncu &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Now this is just the beginning. Even the first version of the module
took quite some time on research, programming and writing. I’m kinda
wondering how maintaining of it will go, so about it later.&lt;/p&gt;

&lt;p&gt;Cheers, &lt;code class=&quot;highlighter-rouge&quot;&gt;npm install rodnecislo&lt;/code&gt; and go opensource.&lt;/p&gt;</content><author><name>Jakub Podlaha</name></author><category term="npm" /><category term="package" /><category term="javascript" /><category term="publish" /><summary type="html">Going down the path of node package creator - guide to create npm package and publish it to npm repository.</summary></entry><entry><title type="html">Co je nového v Ionic 3</title><link href="https://fragaria.cz/website/blog/2017/05/26/co-je-noveho-v-ionic-3_26/" rel="alternate" type="text/html" title="Co je nového v Ionic 3" /><published>2017-05-26T11:24:00+00:00</published><updated>2017-05-26T11:24:00+00:00</updated><id>https://fragaria.cz/website/blog/2017/05/26/co-je-noveho-v-ionic-3_26</id><content type="html" xml:base="https://fragaria.cz/website/blog/2017/05/26/co-je-noveho-v-ionic-3_26/">&lt;p&gt;Jak jsme si ukázali
&lt;a href=&quot;http://blog.fragaria.cz/2017/03/vytvorte-si-appku-v-angularu.html&quot;&gt;minule&lt;/a&gt;,
Ionic je oblíbený framework na tvorbu hybridních mobilních aplikací.
Nyní je již k dipozici Ionic ve verzi 3. Co přinesl nového?&lt;/p&gt;

&lt;h3 id=&quot;změny-pod-kapotou&quot;&gt;Změny pod kapotou&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Změny ve verzi 3 nejsou nijak dramatické. Po vzoru Angularu se ruší
číslování verzí a framework bude označován jen jako “Ionic”.&lt;/li&gt;
  &lt;li&gt;Framework by měl mít rychlejší start a celkově být stabilnější. Jeho
celková velikost se také změnšila.&lt;/li&gt;
  &lt;li&gt;Stěžejní a pro nás nejvýraznější změnou je podpora Angularu 4.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Při přechodu z verze 1 na verzi 2 u příkazu ionic start pro vytvoření
nového projektu přibyl argument &lt;code class=&quot;highlighter-rouge&quot;&gt;--v2&lt;/code&gt;, který definoval vytvoření projektu
ve verzi 2. Pokud chceme vytvořit projekt verze 3, pak stačí zadat jen
ionic start s tím, že se nainstaluje ta nejnovější dostupná verze (platí
od Ionic CLI v2.2.3, ve staších verzích CLI musíte pro nejnovější verzi
Ionicu zadat argument &lt;code class=&quot;highlighter-rouge&quot;&gt;--v2&lt;/code&gt;).
 &lt;/p&gt;

&lt;h3 id=&quot;dekorátor-ionicpage&quot;&gt;Dekorátor IonicPage&lt;/h3&gt;

&lt;p&gt;Ionic nepoužívá Router, namísto něj má tzv. &lt;em&gt;deep link system&lt;/em&gt;, kdy se o
přechod mezi Pages stará NavController, který má metody Push a Pop.
Do funkce Push se vkládá název komponenty, na kterou chceme přesměrovat,
například:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;navCtrl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'MyPage'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Pokud bychom si komponentu chtěli označit jinak, můžeme využít parametru
name v dekorátoru IonicPage, díky kterému pak linkujeme na komponentu
díky vlastní proměnné: &lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;IonicPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt; &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'my-page'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;Component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;MyPage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{...}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Následně na tuto komponentu můžeme linkovat přes proměnnou nastavenou v
dekorátoru:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;navCtrl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'MyPage'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Další vlastností dekorátoru IonicPage je atribut segment, který definuje
URL parametr pro danou komponentu v případě, že je zrovna aktivní:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;IonicPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt; &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'my-page'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt; &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'some-path'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;V URL se daná komponenta zobazí následovně: &lt;code class=&quot;highlighter-rouge&quot;&gt;http://localhost:8101/\#/some-path&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Do proměnné &lt;em&gt;segment&lt;/em&gt; se dá vložit i dynamická proměnná, a to ve formátu
&lt;code class=&quot;highlighter-rouge&quot;&gt;:variable&lt;/code&gt;, příklad:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;IonicPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt; &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'detail-page'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt; &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'detail/:id'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Samotná proměnná se předává v metodě Push, odkazující na naší
komponentu. Více o IonicPage dekorátoru se můžete dozvědět v &lt;a href=&quot;http://ionicframework.com/docs/api/navigation/IonicPage/&quot;&gt;oficiální
dokumentaci&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;lazy-loading&quot;&gt;Lazy loading&lt;/h3&gt;

&lt;p&gt;Jednou z features nového Ionicu je i možnost nastavit si lazy loading,
který znatelně zrychlí celou aplikaci. Lazy loading však není plně
odladěn a stále má nedostatky. Autoři Ionicu se na svém
&lt;a href=&quot;https://blog.ionic.io/ionic-3-0-has-arrived/&quot;&gt;blogu&lt;/a&gt; dokonce zmiňují,
že hledají testery a ocenili by pomoc komunity při testování lazy
loadingu.&lt;/p&gt;

&lt;h3 id=&quot;vhozená-rukavice&quot;&gt;Vhozená rukavice&lt;/h3&gt;

&lt;p&gt;Nic není perfektní a nová verze Ionicu není vyjímkou. Mezi nedostatky,
které si zaslouží péči patří:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Chybné updatování URL adres při pushnutí se do komponenty nejvyšší
úrovně, která využívá nav-tabs.&lt;/li&gt;
  &lt;li&gt;Deep linking funguje zatím jen v jednom navigačním zásobníku, což
znamená že při použití rozdělených panelů (tzv. Ionic split pane)
nebude URL navigace fungovat správně.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;co-bude-dál&quot;&gt;Co bude dál&lt;/h3&gt;

&lt;p&gt;Vývojáři z Ionicu se chtějí zaměřit především na zrychlení startu
aplikace a na zvýšení rychlosti. Průběžně budou zpracovávat uživatelský
feedback k sekci lazy loadingu. Samozřejmostí je další oprava bugů v
celém frameworku.
Vývojáři z Ionicu se chtějí zaměřit především na rychlost celé aplikace,
především pak její start. Ionic není dokonalý, ale jak jsem psal výše,
vývojáři Ionicu budou rádi za vaše náměty a pomoc. Třeba pak budete mít
dobrý pocit, že jste něco vrátili opensource komunitě.&lt;/p&gt;

&lt;p&gt;Koho by zajímal další progres Ionicu, může je sledovat na
&lt;a href=&quot;https://twitter.com/ionicframework&quot;&gt;Twitteru&lt;/a&gt; nebo se mrknout na jejich
&lt;a href=&quot;https://blog.ionic.io/&quot;&gt;blog&lt;/a&gt;.&lt;/p&gt;</content><author><name>Jarda Brchel</name></author><category term="ionic" /><category term="mobily" /><category term="javascript" /><category term="angularjs" /><summary type="html">Jak jsme si ukázali minule, Ionic je oblíbený framework na tvorbu hybridních mobilních aplikací. Nyní je již k dipozici Ionic ve verzi 3. Co přinesl nového?</summary></entry></feed>