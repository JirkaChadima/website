$sitenav-push: (
    mobile: calc(100vh - #{map-get($sitenav-menu-height, mobile)}),
    tablet: calc(100vh - #{map-get($sitenav-menu-height, tablet)}),
);

// push navigation outsite of the screen we need negative value of $sitenav-push
// but calc() cannot handle -1 * calc()
$sitenav-push-negative: (
    mobile: calc(-100vh + #{map-get($sitenav-menu-height, mobile)}),
    tablet: calc(-100vh + #{map-get($sitenav-menu-height, tablet)}),
);
$sitenav-slide-transition: cubic-bezier(1, 0, 0, 1);

.sitenav {
    position: fixed;
    width: 100%;
    background: map-get($palette, white);
    z-index: 20;
}

.sitenav__container {
    max-width: $page-container-max-width;
    margin: 0 auto;
}

.sitenav,
.sitenav__menu {
    // Height is needed so that .sitenav__linkset doesn't make the gap.
    height: map-get($sitenav-menu-height, mobile);

    @include breakpoint(tablet up) {
            transition: height .15s linear;
        height: map-get($sitenav-menu-height, tablet);
        will-change: height;
    }
}

@include breakpoint(tablet up) {
    .sitenav.shrink {
        &,
        .sitenav__menu {
            height: map-get($sitenav-menu-height, tablet)/2.5;
        }

        .sitenav__brand img{
            height: 6rem;
            transform: translate3d(0, 1.5rem, 0);
        }

        .sitenav__linkset {

        }
    }
}


/* Menu container that is visible all the time */
.sitenav__menu {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-family: getFontFamily($headingtype);
    font-weight: map-get($headingtype, semi);
    // necessary for z-index
    position: relative;
    // Menu is above the linkset and the linkset slides from the bottom of it
    z-index: 2;
    background: map-get($palette, white);

    @include breakpoint(tablet-small up) {
        margin-left: -1rem;
        margin-right: -1rem;
    }
}

// logo image
.sitenav__brand {
    order: 1;
    margin: 0 0 0 1rem;

    img {
        transform: translate3d(0, .3rem, 0);
        height: 3rem;

        @include breakpoint(tablet up) {
            transition: height .15s linear, transform .15s linear;
            height: 8rem;
            will-change: height, translate
        }
    }
    // logo image scales up on bigger screens
    @include breakpoint(tablet up) {
        margin: 0 5.1rem 0 0;
        padding: .5em;
        order: 2;
    }
}

.sitenav__company {
    padding: 1rem 1rem 1rem .5rem;
    transition: #{$anchor-hover-transition};
    text-transform: uppercase;
    text-align: left;
    order: 2;
    flex: 1;

    @include baseline(delta, $headingtype, $lineheight: 3.5, $below: 1);

    @include breakpoint(tablet up) {
        padding: 1rem;
        order: 1;
        flex: 0;
    }

    &:hover {
        color: map-get($palette, red);
    }
}

/* List of menu links */
.sitenav__linkset {
    display: flex;
    width: 100%;
    padding-top: map-get($sitenav-menu-height, mobile)/2;
    list-style-type: none;
    flex-direction: column;
    align-items: center;
    // Menu is above the linkset and the linkset slides from the bottom of it
    z-index: 1;
    height: 0;
    overflow: scroll;

    @include breakpoint(tablet up) {
        padding-top: map-get($sitenav-menu-height, tablet)/2;
        justify-content: flex-start;
    }
}

/* Single item within the links */
.sitenav__linkset-item {
    font-family: getFontFamily($headingtype);
    font-weight: map-get($headingtype, semi);
    letter-spacing: .1rem;
    padding: 1rem 0;

    // active link is highlighted
    &--active .sitenav__link,
    &:hover .sitenav__link,
    &:active .sitenav__link {
        color: map-get($palette, red);
    }

    .sitenav__link {
        @include baseline(beta, $headingtype, $lineheight: 3.5, $below: 1, $breakpoint: tablet-small down);
        @include baseline(beta, $headingtype, $lineheight: 5, $below: 1, $breakpoint: tablet up);
    }
}


/* Set up animated props */
.sitenav__linkset {
    transform: translate3d(0, map-get($sitenav-push-negative, mobile), 0);
    opacity: 0;
    background: map-get($palette, white);
    pointer-events: none;
    transition: transform .3s $sitenav-slide-transition, opacity .15s $sitenav-slide-transition;
    // transition-property: opacity, transform;
    will-change: opacity, transform, height;

    @include breakpoint(tablet up) {
        transform: translate3d(0, map-get($sitenav-push-negative, tablet), 0);
    }

    @include breakpoint(desktop up) {
        transform: translate3d(0, map-get($sitenav-push-negative, desktop), 0);
    }
}

/* Styles when menu is enabled */
.sitenav-wrapper--show {
    // Unshift linkset
    .sitenav__linkset {
        transform: translate3d(0, 0, 0);
        opacity: 1;
        pointer-events: all;
        height: map-get($sitenav-push, mobile);

        @include breakpoint(tablet up) {
            height: map-get($sitenav-push, tablet);
        }
    }

    &.shrink {
        @include breakpoint(tablet up) {
            .sitenav__linkset {
                height: 100vh;
            }
        }
    }
}

.sitenav-wrapper--noanim .sitenav__linkset {
    transition: none;
}
